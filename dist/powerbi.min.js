!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var o=n(1);window.Powerbi=o["default"],window.powerbi=new o["default"]},function(e,t,n){"use strict";var o=n(2),r=n(4),i=n(5),s=n(3),a=function(){function e(t){void 0===t&&(t={}),this.embeds=[],window.addEventListener("message",this.onReceiveMessage.bind(this),!1),this.config=s["default"].assign({},e.defaultConfig,t),this.config.autoEmbedOnContentLoaded&&this.enableAutoEmbed()}return e.prototype.init=function(e){var t=this;e=e&&e instanceof HTMLElement?e:document.body;var n=Array.prototype.slice.call(e.querySelectorAll("["+o["default"].embedUrlAttribute+"]"));n.forEach(function(e){return t.embed(e)})},e.prototype.embed=function(e,t){void 0===t&&(t={});var n,o=e;return n=o.powerBiEmbed?this.embedExisting(o,t):this.embedNew(o,t)},e.prototype.embedNew=function(t,n){var i=this,a=n.type||t.getAttribute(o["default"].typeAttribute);if(!a)throw new Error("Attempted to embed using config "+JSON.stringify(n)+" on element "+t.outerHTML+", but could not determine what type of component to embed. You must specify a type in the configuration or as an attribute such as '"+o["default"].typeAttribute+'="'+r["default"].name.toLowerCase()+"\"'.");n.type=a;var u=s["default"].find(function(e){return a===e.name.toLowerCase()},e.components);if(!u)throw new Error("Attempted to embed component of type: "+a+" but did not find any matching component.  Please verify the type you specified is intended.");n.getGlobalAccessToken=function(){return i.accessToken};var c=new u(t,n);return t.powerBiEmbed=c,this.embeds.push(c),c},e.prototype.embedExisting=function(e,t){var n=s["default"].find(function(t){return t.element===e},this.embeds);if(!n)throw new Error("Attempted to embed using config "+JSON.stringify(t)+" on element "+e.outerHTML+" which already has embedded comopnent associated, but could not find the existing comopnent in the list of active components. This could indicate the embeds list is out of sync with the DOM, or the component is referencing the incorrect HTML element.");return n.load(t,!0),n},e.prototype.enableAutoEmbed=function(){var e=this;window.addEventListener("DOMContentLoaded",function(t){return e.init(document.body)},!1)},e.prototype.get=function(e){var t=e;if(!t.powerBiEmbed)throw new Error("You attempted to get an instance of powerbi component associated with element: "+e.outerHTML+" but there was no associated instance.");return t.powerBiEmbed},e.prototype.remove=function(e){s["default"].remove(function(t){return t===e},this.embeds)},e.prototype.onReceiveMessage=function(t){if(t)try{var n=s["default"].find(function(e){return t.source===e.iframe.contentWindow},this.embeds);if(n){var o="string"==typeof t.data?JSON.parse(t.data):t.data;s["default"].raiseCustomEvent(n.element,e.eventMap[o.event],o)}}catch(r){if("function"!=typeof this.config.onError)throw r;this.config.onError.call(window,r)}},e.components=[i["default"],r["default"]],e.eventMap={tileClicked:"tile-click",tileLoaded:"tile-load",reportPageLoaded:"report-load"},e.defaultConfig={autoEmbedOnContentLoaded:!1,onError:function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return console.log(e[0],e.slice(1))}},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a},function(e,t,n){"use strict";var o=n(3),r=function(){function e(t,n){var r=this;this.element=t,this.options=o["default"].assign({},e.defaultOptions,n),this.options.accessToken=this.getAccessToken(),this.options.embedUrl=this.getEmbedUrl();var i='<iframe style="width:100%;height:100%;" src="'+this.options.embedUrl+'" scrolling="no" allowfullscreen="true"></iframe>';this.element.innerHTML=i,this.iframe=this.element.childNodes[0],this.iframe.addEventListener("load",function(){return r.load(r.options,!1)},!1)}return e.prototype.load=function(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=null),!n)throw new Error("You called load without providing message properties from the concrete embeddable class.");var r={accessToken:e.accessToken};o["default"].assign(n,r);var i={message:n};o["default"].raiseCustomEvent(this.element,i.message.action,i),this.iframe.contentWindow.postMessage(JSON.stringify(i.message),"*")},e.prototype.getAccessToken=function(){var t=this.options.accessToken||this.element.getAttribute(e.accessTokenAttribute)||this.options.getGlobalAccessToken();if(!t)throw new Error("No access token was found for element. You must specify an access token directly on the element using attribute '"+e.accessTokenAttribute+"' or specify a global token at: powerbi.accessToken.");return t},e.prototype.getEmbedUrl=function(){var t=this.options.embedUrl||this.element.getAttribute(e.embedUrlAttribute);if("string"!=typeof t||0===t.length)throw new Error("Embed Url is required, but it was not found. You must provide an embed url either as part of embed configuration or as attribute '"+e.embedUrlAttribute+"'.");return t},e.prototype.fullscreen=function(){var e=this.iframe.requestFullscreen||this.iframe.msRequestFullscreen||this.iframe.mozRequestFullScreen||this.iframe.webkitRequestFullscreen;e.call(this.iframe)},e.prototype.exitFullscreen=function(){if(this.isFullscreen(this.iframe)){var e=document.exitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.msExitFullscreen;e.call(document)}},e.prototype.isFullscreen=function(e){var t=["fullscreenElement","webkitFullscreenElement","mozFullscreenScreenElement","msFullscreenElement"];return t.some(function(t){return document[t]===e})},e.embedUrlAttribute="powerbi-embed-url",e.accessTokenAttribute="powerbi-access-token",e.typeAttribute="powerbi-type",e.defaultOptions={filterPaneEnabled:!0},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r},function(e,t){"use strict";var n=function(){function e(){}return e.raiseCustomEvent=function(e,t,n){var o;if("function"==typeof CustomEvent?o=new CustomEvent(t,{detail:n,bubbles:!0,cancelable:!0}):(o=document.createEvent("CustomEvent"),o.initCustomEvent(t,!0,!0,n)),e.dispatchEvent(o),!o.defaultPrevented&&o.returnValue){var r="on"+t.replace("-",""),i=e.getAttribute(r);i&&eval.call(e,i)}},e.findIndex=function(e,t){if(!Array.isArray(t))throw new Error("You attempted to call find with second parameter that was not an array. You passed: "+t);var n;return t.some(function(t,o){return e(t)?(n=o,!0):void 0}),n},e.find=function(t,n){var o=e.findIndex(t,n);return n[o]},e.remove=function(t,n){var o=e.findIndex(t,n);n.splice(o,1)},e.assign=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=e[0];if(void 0===n||null===n)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(n),r=1;r<arguments.length;r++){var i=arguments[r];if(void 0!==i&&null!==i)for(var s in i)i.hasOwnProperty(s)&&(o[s]=i[s])}return o},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},function(e,t,n){"use strict";var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=n(2),i=function(e){function t(){e.apply(this,arguments)}return o(t,e),t.prototype.getEmbedUrl=function(){var t=e.prototype.getEmbedUrl.call(this);return this.options.filterPaneEnabled||(t+="&filterPaneEnabled=false"),t},t.prototype.load=function(t,n){if(void 0===n&&(n=!1),n&&"string"!=typeof t.id)throw new Error("id must be specified when loading reports on existing elements.");var o={action:"loadReport",reportId:t.id,accessToken:null};e.prototype.load.call(this,t,n,o)},t}(r["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i},function(e,t,n){"use strict";var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=n(2),i=function(e){function t(){e.apply(this,arguments)}return o(t,e),t.prototype.getEmbedUrl=function(){var t=e.prototype.getEmbedUrl.call(this);return t},t.prototype.load=function(t,n){if(void 0===n&&(n=!1),n&&"string"!=typeof t.id)throw new Error("id must be specified when loading reports on existing elements.");var o={action:"loadTile",tileId:t.id,accessToken:null};e.prototype.load.call(this,t,n,o)},t}(r["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvd2VyYmkuanMiXSwibmFtZXMiOlsibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwibSIsImMiLCJwIiwiY29yZV8xIiwid2luZG93IiwiUG93ZXJiaSIsInBvd2VyYmkiLCJlbWJlZF8xIiwicmVwb3J0XzEiLCJ0aWxlXzEiLCJ1dGlsXzEiLCJQb3dlckJpIiwiY29uZmlnIiwidGhpcyIsImVtYmVkcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJvblJlY2VpdmVNZXNzYWdlIiwiYmluZCIsImFzc2lnbiIsImRlZmF1bHRDb25maWciLCJhdXRvRW1iZWRPbkNvbnRlbnRMb2FkZWQiLCJlbmFibGVBdXRvRW1iZWQiLCJwcm90b3R5cGUiLCJpbml0IiwiY29udGFpbmVyIiwiX3RoaXMiLCJIVE1MRWxlbWVudCIsImRvY3VtZW50IiwiYm9keSIsImVsZW1lbnRzIiwiQXJyYXkiLCJzbGljZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJlbWJlZFVybEF0dHJpYnV0ZSIsImZvckVhY2giLCJlbGVtZW50IiwiZW1iZWQiLCJjb21wb25lbnQiLCJwb3dlckJpRWxlbWVudCIsInBvd2VyQmlFbWJlZCIsImVtYmVkRXhpc3RpbmciLCJlbWJlZE5ldyIsImNvbXBvbmVudFR5cGUiLCJ0eXBlIiwiZ2V0QXR0cmlidXRlIiwidHlwZUF0dHJpYnV0ZSIsIkVycm9yIiwiSlNPTiIsInN0cmluZ2lmeSIsIm91dGVySFRNTCIsIm5hbWUiLCJ0b0xvd2VyQ2FzZSIsIkNvbXBvbmVudCIsImZpbmQiLCJjb21wb25lbnRzIiwiZ2V0R2xvYmFsQWNjZXNzVG9rZW4iLCJhY2Nlc3NUb2tlbiIsInB1c2giLCJ4IiwibG9hZCIsImV2ZW50IiwiZ2V0IiwicmVtb3ZlIiwic291cmNlIiwiaWZyYW1lIiwiY29udGVudFdpbmRvdyIsIm1lc3NhZ2VEYXRhIiwiZGF0YSIsInBhcnNlIiwicmFpc2VDdXN0b21FdmVudCIsImV2ZW50TWFwIiwiZSIsIm9uRXJyb3IiLCJ0aWxlQ2xpY2tlZCIsInRpbGVMb2FkZWQiLCJyZXBvcnRQYWdlTG9hZGVkIiwiYXJncyIsIl9pIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiY29uc29sZSIsImxvZyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJFbWJlZCIsIm9wdGlvbnMiLCJkZWZhdWx0T3B0aW9ucyIsImdldEFjY2Vzc1Rva2VuIiwiZW1iZWRVcmwiLCJnZXRFbWJlZFVybCIsImlmcmFtZUh0bWwiLCJpbm5lckhUTUwiLCJjaGlsZE5vZGVzIiwicmVxdWlyZUlkIiwibWVzc2FnZSIsImJhc2VNZXNzYWdlIiwiYWN0aW9uIiwicG9zdE1lc3NhZ2UiLCJhY2Nlc3NUb2tlbkF0dHJpYnV0ZSIsImZ1bGxzY3JlZW4iLCJyZXF1ZXN0RnVsbFNjcmVlbiIsInJlcXVlc3RGdWxsc2NyZWVuIiwibXNSZXF1ZXN0RnVsbHNjcmVlbiIsIm1velJlcXVlc3RGdWxsU2NyZWVuIiwid2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4iLCJleGl0RnVsbHNjcmVlbiIsImlzRnVsbHNjcmVlbiIsIm1vekNhbmNlbEZ1bGxTY3JlZW4iLCJ3ZWJraXRFeGl0RnVsbHNjcmVlbiIsIm1zRXhpdEZ1bGxzY3JlZW4iLCJzb21lIiwib3B0aW9uIiwiZmlsdGVyUGFuZUVuYWJsZWQiLCJVdGlscyIsImV2ZW50TmFtZSIsImV2ZW50RGF0YSIsImN1c3RvbUV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJkZXRhaWwiLCJidWJibGVzIiwiY2FuY2VsYWJsZSIsImNyZWF0ZUV2ZW50IiwiaW5pdEN1c3RvbUV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsImRlZmF1bHRQcmV2ZW50ZWQiLCJyZXR1cm5WYWx1ZSIsImlubGluZUV2ZW50QXR0ciIsInJlcGxhY2UiLCJpbmxpbmVTY3JpcHQiLCJldmFsIiwiZmluZEluZGV4IiwicHJlZGljYXRlIiwieHMiLCJpc0FycmF5IiwiaW5kZXgiLCJpIiwic3BsaWNlIiwidGFyZ2V0IiwidW5kZWZpbmVkIiwiVHlwZUVycm9yIiwib3V0cHV0IiwibmV4dEtleSIsImhhc093blByb3BlcnR5IiwiX19leHRlbmRzIiwiZCIsImIiLCJfXyIsImNvbnN0cnVjdG9yIiwiY3JlYXRlIiwiUmVwb3J0IiwiX3N1cGVyIiwiYXBwbHkiLCJyZXBvcnRJZCIsIlRpbGUiLCJ0aWxlSWQiXSwibWFwcGluZ3MiOiJDQUFTLFNBQVVBLEdBS1QsUUFBU0MsR0FBb0JDLEdBRzVCLEdBQUdDLEVBQWlCRCxHQUNuQixNQUFPQyxHQUFpQkQsR0FBVUUsT0FHbkMsSUFBSUMsR0FBU0YsRUFBaUJELElBQzdCRSxXQUNBRSxHQUFJSixFQUNKSyxRQUFRLEVBVVQsT0FOQVAsR0FBUUUsR0FBVU0sS0FBS0gsRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0gsR0FHL0RJLEVBQU9FLFFBQVMsRUFHVEYsRUFBT0QsUUF2QmYsR0FBSUQsS0FxQ0osT0FUQUYsR0FBb0JRLEVBQUlULEVBR3hCQyxFQUFvQlMsRUFBSVAsRUFHeEJGLEVBQW9CVSxFQUFJLEdBR2pCVixFQUFvQixLQUsvQixTQUFTSSxFQUFRRCxFQUFTSCxHQUUvQixZQUNBLElBQUlXLEdBQVNYLEVBQW9CLEVBTWpDWSxRQUFPQyxRQUFVRixFQUFBQSxXQUNqQkMsT0FBT0UsUUFBVSxHQUFJSCxHQUFBQSxZQUtoQixTQUFTUCxFQUFRRCxFQUFTSCxHQUUvQixZQUNBLElBQUllLEdBQVVmLEVBQW9CLEdBQzlCZ0IsRUFBV2hCLEVBQW9CLEdBQy9CaUIsRUFBU2pCLEVBQW9CLEdBQzdCa0IsRUFBU2xCLEVBQW9CLEdBQzdCbUIsRUFBVyxXQUNYLFFBQVNBLEdBQVFDLEdBQ0UsU0FBWEEsSUFBcUJBLE1BQ3pCQyxLQUFLQyxVQUNMVixPQUFPVyxpQkFBaUIsVUFBV0YsS0FBS0csaUJBQWlCQyxLQUFLSixPQUFPLEdBRXJFQSxLQUFLRCxPQUFTRixFQUFBQSxXQUFlUSxVQUFXUCxFQUFRUSxjQUFlUCxHQUMzREMs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RUFBYWhFLE9BQU9tRSxPQUFPSCxJQUFNQyxFQUFHN0gsVUFBWTRILEVBQUU1SCxVQUFXLEdBQUk2SCxLQUUvRTVJLEVBQVVmLEVBQW9CLEdBQzlCa0ssRUFBUSxTQUFVSCxHQUVsQixRQUFTRyxLQUNMSCxFQUFPQyxNQUFNM0ksS0FBTWlFLFdBa0J2QixNQXBCQWtFLEdBQVVVLEVBQU1ILEdBSWhCRyxFQUFLcEksVUFBVW9FLFlBQWMsV0FDekIsR0FBSUQsR0FBVzhELEVBQU9qSSxVQUFVb0UsWUFBWTNGLEtBQUtjLEtBQ2pELE9BQU80RSxJQUVYaUUsRUFBS3BJLFVBQVVxQyxLQUFPLFNBQVUyQixFQUFTUSxHQUVyQyxHQURrQixTQUFkQSxJQUF3QkEsR0FBWSxHQUNwQ0EsR0FBbUMsZ0JBQWZSLEdBQVF6RixHQUM1QixLQUFNLElBQUlpRCxPQUFNLGtFQUVwQixJQUFJaUQsSUFDQUUsT0FBUSxXQUNSMEQsT0FBUXJFLEVBQVF6RixHQUNoQjJELFlBQWEsS0FFakIrRixHQUFPakksVUFBVXFDLEtBQUs1RCxLQUFLYyxLQUFNeUUsRUFBU1EsRUFBV0MsSUFFbEQyRCxHQUNUbkosRUFBQUEsV0FDRjJFLFFBQU9DLGVBQWV4RixFQUFTLGNBQWdCeUYsT0FBTyxJQUN0RHpGLEVBQUFBLFdBQWtCK0oiLCJmaWxlIjoicG93ZXJiaS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0dmFyIGNvcmVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XHJcblx0LyoqXHJcblx0ICogTWFrZSBQb3dlckJpIGF2YWlsYWJsZSBvbiBnbG9iYWwgb2JqZWN0IGZvciB1c2UgaW4gYXBwcyB3aXRob3V0IG1vZHVsZSBsb2FkaW5nIHN1cHBvcnQuXHJcblx0ICogU2F2ZSBjbGFzcyB0byBhbGxvdyBjcmVhdGluZyBhbiBpbnN0YW5jZSBvZiB0aGUgc2VydmljZS5cclxuXHQgKiBDcmVhdGUgaW5zdGFuY2Ugb2YgY2xhc3Mgd2l0aCBkZWZhdWx0IGNvbmZpZyBmb3Igbm9ybWFsIHVzYWdlLlxyXG5cdCAqL1xyXG5cdHdpbmRvdy5Qb3dlcmJpID0gY29yZV8xLmRlZmF1bHQ7XHJcblx0d2luZG93LnBvd2VyYmkgPSBuZXcgY29yZV8xLmRlZmF1bHQoKTtcclxuXG5cbi8qKiovIH0sXG4vKiAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHR2YXIgZW1iZWRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XHJcblx0dmFyIHJlcG9ydF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcclxuXHR2YXIgdGlsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcclxuXHR2YXIgdXRpbF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcclxuXHR2YXIgUG93ZXJCaSA9IChmdW5jdGlvbiAoKSB7XHJcblx0ICAgIGZ1bmN0aW9uIFBvd2VyQmkoY29uZmlnKSB7XHJcblx0ICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH1cclxuXHQgICAgICAgIHRoaXMuZW1iZWRzID0gW107XHJcblx0ICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMub25SZWNlaXZlTWVzc2FnZS5iaW5kKHRoaXMpLCBmYWxzZSk7XHJcblx0ICAgICAgICAvLyBUT0RPOiBDaGFuZ2Ugd2hlbiBPYmplY3QuYXNzaWduIGlzIGF2YWlsYWJsZS5cclxuXHQgICAgICAgIHRoaXMuY29uZmlnID0gdXRpbF8xLmRlZmF1bHQuYXNzaWduKHt9LCBQb3dlckJpLmRlZmF1bHRDb25maWcsIGNvbmZpZyk7XHJcblx0ICAgICAgICBpZiAodGhpcy5jb25maWcuYXV0b0VtYmVkT25Db250ZW50TG9hZGVkKSB7XHJcblx0ICAgICAgICAgICAgdGhpcy5lbmFibGVBdXRvRW1iZWQoKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgfVxyXG5cdCAgICAvKipcclxuXHQgICAgICogSGFuZGxlciBmb3IgRE9NQ29udGVudExvYWRlZCB3aGljaCBzZWFyY2hlcyBET00gZm9yIGVsZW1lbnRzIGhhdmluZyAncG93ZXJiaS1lbWJlZC11cmwnIGF0dHJpYnV0ZVxyXG5cdCAgICAgKiBhbmQgYXV0b21hdGljYWxseSBhdHRlbXB0cyB0byBlbWJlZCBhIHBvd2VyYmkgY29tcG9uZW50IGJhc2VkIG9uIGluZm9ybWF0aW9uIGZyb20gdGhlIGF0dHJpYnV0ZXMuXHJcblx0ICAgICAqIE9ubHkgcnVucyBpZiBgY29uZmlnLmF1dG9FbWJlZE9uQ29udGVudExvYWRlZGAgaXMgdHJ1ZSB3aGVuIHRoZSBzZXJ2aWNlIGlzIGNyZWF0ZWQuXHJcblx0ICAgICAqL1xyXG5cdCAgICBQb3dlckJpLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKGNvbnRhaW5lcikge1xyXG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHQgICAgICAgIGNvbnRhaW5lciA9IChjb250YWluZXIgJiYgY29udGFpbmVyIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpID8gY29udGFpbmVyIDogZG9jdW1lbnQuYm9keTtcclxuXHQgICAgICAgIHZhciBlbGVtZW50cyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKFwiW1wiICsgZW1iZWRfMS5kZWZhdWx0LmVtYmVkVXJsQXR0cmlidXRlICsgXCJdXCIpKTtcclxuXHQgICAgICAgIGVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsgcmV0dXJuIF90aGlzLmVtYmVkKGVsZW1lbnQpOyB9KTtcclxuXHQgICAgfTtcclxuXHQgICAgLyoqXHJcblx0ICAgICAqIEdpdmVuIGFuIGh0bWwgZWxlbWVudCBlbWJlZCBjb21wb25lbnQgYmFzZWQgb24gY29uZmlndXJhdGlvbi5cclxuXHQgICAgICogSWYgY29tcG9uZW50IGhhcyBhbHJlYWR5IGJlZW4gY3JlYXRlZCBhbmQgYXR0YWNoZWQgdG8gZWxlbWVudCByZS11c2UgY29tcG9uZW50IGluc3RhbmNlIGFuZCBleGlzdGluZyBpZnJhbWUsXHJcblx0ICAgICAqIG90aGVyd2lzZSBjcmVhdGUgYSBuZXcgY29tcG9uZW50IGluc3RhbmNlXHJcblx0ICAgICAqL1xyXG5cdCAgICBQb3dlckJpLnByb3RvdHlwZS5lbWJlZCA9IGZ1bmN0aW9uIChlbGVtZW50LCBjb25maWcpIHtcclxuXHQgICAgICAgIGlmIChjb25maWcgPT09IHZvaWQgMCkgeyBjb25maWcgPSB7fTsgfVxyXG5cdCAgICAgICAgdmFyIGNvbXBvbmVudDtcclxuXHQgICAgICAgIHZhciBwb3dlckJpRWxlbWVudCA9IGVsZW1lbnQ7XHJcblx0ICAgICAgICBpZiAocG93ZXJCaUVsZW1lbnQucG93ZXJCaUVtYmVkKSB7XHJcblx0ICAgICAgICAgICAgY29tcG9uZW50ID0gdGhpcy5lbWJlZEV4aXN0aW5nKHBvd2VyQmlFbGVtZW50LCBjb25maWcpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgZWxzZSB7XHJcblx0ICAgICAgICAgICAgY29tcG9uZW50ID0gdGhpcy5lbWJlZE5ldyhwb3dlckJpRWxlbWVudCwgY29uZmlnKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIHJldHVybiBjb21wb25lbnQ7XHJcblx0ICAgIH07XHJcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBHaXZlbiBhbiBodG1sIGVsZW1lbnQgZW1iZWQgY29tcG9uZW50IGJhc2UgY29uZmlndXJhdGlvbi5cclxuXHQgICAgICogU2F2ZSBjb21wb25lbnQgaW5zdGFuY2Ugb24gZWxlbWVudCBmb3IgbGF0ZXIgbG9va3VwLlxyXG5cdCAgICAgKi9cclxuXHQgICAgUG93ZXJCaS5wcm90b3R5cGUuZW1iZWROZXcgPSBmdW5jdGlvbiAoZWxlbWVudCwgY29uZmlnKSB7XHJcblx0ICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG5cdCAgICAgICAgdmFyIGNvbXBvbmVudFR5cGUgPSBjb25maWcudHlwZSB8fCBlbGVtZW50LmdldEF0dHJpYnV0ZShlbWJlZF8xLmRlZmF1bHQudHlwZUF0dHJpYnV0ZSk7XHJcblx0ICAgICAgICBpZiAoIWNvbXBvbmVudFR5cGUpIHtcclxuXHQgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBdHRlbXB0ZWQgdG8gZW1iZWQgdXNpbmcgY29uZmlnIFwiICsgSlNPTi5zdHJpbmdpZnkoY29uZmlnKSArIFwiIG9uIGVsZW1lbnQgXCIgKyBlbGVtZW50Lm91dGVySFRNTCArIFwiLCBidXQgY291bGQgbm90IGRldGVybWluZSB3aGF0IHR5cGUgb2YgY29tcG9uZW50IHRvIGVtYmVkLiBZb3UgbXVzdCBzcGVjaWZ5IGEgdHlwZSBpbiB0aGUgY29uZmlndXJhdGlvbiBvciBhcyBhbiBhdHRyaWJ1dGUgc3VjaCBhcyAnXCIgKyBlbWJlZF8xLmRlZmF1bHQudHlwZUF0dHJpYnV0ZSArIFwiPVxcXCJcIiArIHJlcG9ydF8xLmRlZmF1bHQubmFtZS50b0xvd2VyQ2FzZSgpICsgXCJcXFwiJy5cIik7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICAvLyBTYXZlIHR5cGUgb24gY29uZmlndXJhdGlvbiBzbyBpdCBjYW4gYmUgcmVmZXJlbmNlZCBsYXRlciBhdCBrbm93biBsb2NhdGlvblxyXG5cdCAgICAgICAgY29uZmlnLnR5cGUgPSBjb21wb25lbnRUeXBlO1xyXG5cdCAgICAgICAgdmFyIENvbXBvbmVudCA9IHV0aWxfMS5kZWZhdWx0LmZpbmQoZnVuY3Rpb24gKGNvbXBvbmVudCkgeyByZXR1cm4gY29tcG9uZW50VHlwZSA9PT0gY29tcG9uZW50Lm5hbWUudG9Mb3dlckNhc2UoKTsgfSwgUG93ZXJCaS5jb21wb25lbnRzKTtcclxuXHQgICAgICAgIGlmICghQ29tcG9uZW50KSB7XHJcblx0ICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXR0ZW1wdGVkIHRvIGVtYmVkIGNvbXBvbmVudCBvZiB0eXBlOiBcIiArIGNvbXBvbmVudFR5cGUgKyBcIiBidXQgZGlkIG5vdCBmaW5kIGFueSBtYXRjaGluZyBjb21wb25lbnQuICBQbGVhc2UgdmVyaWZ5IHRoZSB0eXBlIHlvdSBzcGVjaWZpZWQgaXMgaW50ZW5kZWQuXCIpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgLy8gVE9ETzogQ29uc2lkZXIgcmVtb3ZpbmcgaW4gZmF2b3Igb2YgcGFzc2luZyByZWZlcmVuY2UgdG8gYHRoaXNgIGluIGNvbnN0cnVjdG9yXHJcblx0ICAgICAgICAvLyBUaGUgZ2V0R2xvYmFsQWNjZXNzVG9rZW4gZnVuY3Rpb24gaXMgb25seSBoZXJlIHNvIHRoYXQgdGhlIGNvbXBvbmVudHMgKFRpbGUgfCBSZXBvcnQpIGNhbiBnZXQgdGhlIGdsb2JhbCBhY2Nlc3MgdG9rZW4gd2l0aG91dCBuZWVkaW5nIHJlZmVyZW5jZVxyXG5cdCAgICAgICAgLy8gdG8gdGhlIHNlcnZpY2UgdGhhdCB0aGV5IGFyZSByZWdpc3RlcmVkIHdpdGhpbiBiZWNhdWVzIGl0IGNyZWF0ZXMgY2lyY3VsYXIgZGVwZW5kZW5jaWVzXHJcblx0ICAgICAgICBjb25maWcuZ2V0R2xvYmFsQWNjZXNzVG9rZW4gPSBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5hY2Nlc3NUb2tlbjsgfTtcclxuXHQgICAgICAgIHZhciBjb21wb25lbnQgPSBuZXcgQ29tcG9uZW50KGVsZW1lbnQsIGNvbmZpZyk7XHJcblx0ICAgICAgICBlbGVtZW50LnBvd2VyQmlFbWJlZCA9IGNvbXBvbmVudDtcclxuXHQgICAgICAgIHRoaXMuZW1iZWRzLnB1c2goY29tcG9uZW50KTtcclxuXHQgICAgICAgIHJldHVybiBjb21wb25lbnQ7XHJcblx0ICAgIH07XHJcblx0ICAgIFBvd2VyQmkucHJvdG90eXBlLmVtYmVkRXhpc3RpbmcgPSBmdW5jdGlvbiAoZWxlbWVudCwgY29uZmlnKSB7XHJcblx0ICAgICAgICB2YXIgY29tcG9uZW50ID0gdXRpbF8xLmRlZmF1bHQuZmluZChmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5lbGVtZW50ID09PSBlbGVtZW50OyB9LCB0aGlzLmVtYmVkcyk7XHJcblx0ICAgICAgICBpZiAoIWNvbXBvbmVudCkge1xyXG5cdCAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkF0dGVtcHRlZCB0byBlbWJlZCB1c2luZyBjb25maWcgXCIgKyBKU09OLnN0cmluZ2lmeShjb25maWcpICsgXCIgb24gZWxlbWVudCBcIiArIGVsZW1lbnQub3V0ZXJIVE1MICsgXCIgd2hpY2ggYWxyZWFkeSBoYXMgZW1iZWRkZWQgY29tb3BuZW50IGFzc29jaWF0ZWQsIGJ1dCBjb3VsZCBub3QgZmluZCB0aGUgZXhpc3RpbmcgY29tb3BuZW50IGluIHRoZSBsaXN0IG9mIGFjdGl2ZSBjb21wb25lbnRzLiBUaGlzIGNvdWxkIGluZGljYXRlIHRoZSBlbWJlZHMgbGlzdCBpcyBvdXQgb2Ygc3luYyB3aXRoIHRoZSBET00sIG9yIHRoZSBjb21wb25lbnQgaXMgcmVmZXJlbmNpbmcgdGhlIGluY29ycmVjdCBIVE1MIGVsZW1lbnQuXCIpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgY29tcG9uZW50LmxvYWQoY29uZmlnLCB0cnVlKTtcclxuXHQgICAgICAgIHJldHVybiBjb21wb25lbnQ7XHJcblx0ICAgIH07XHJcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBBZGRzIGV2ZW50IGhhbmRsZXIgZm9yIERPTUNvbnRlbnRMb2FkZWQgd2hpY2ggZmluZHMgYWxsIGVsZW1lbnRzIGluIERPTSB3aXRoIGF0dHJpYnV0ZSBwb3dlcmJpLWVtYmVkLXVybFxyXG5cdCAgICAgKiB0aGVuIGF0dGVtcHRzIHRvIGluaXRpYXRlIHRoZSBlbWJlZCBwcm9jZXNzIGJhc2VkIG9uIGRhdGEgZnJvbSBvdGhlciBwb3dlcmJpLSogYXR0cmlidXRlcy5cclxuXHQgICAgICogKFRoaXMgaXMgdXN1YWxseSBvbmx5IHVzZWZ1bCBmb3IgYXBwbGljYXRpb25zIHJlbmRlcmVkIG9uIGJ5IHRoZSBzZXJ2ZXIgc2luY2UgYWxsIHRoZSBkYXRhIG5lZWRlZCB3aWxsIGJlIGF2YWlsYWJsZSBieSB0aGUgdGltZSB0aGUgaGFuZGxlciBpcyBjYWxsZWQuKVxyXG5cdCAgICAgKi9cclxuXHQgICAgUG93ZXJCaS5wcm90b3R5cGUuZW5hYmxlQXV0b0VtYmVkID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHQgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiBfdGhpcy5pbml0KGRvY3VtZW50LmJvZHkpOyB9LCBmYWxzZSk7XHJcblx0ICAgIH07XHJcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBSZXR1cm5zIGluc3RhbmNlIG9mIGNvbXBvbmVudCBhc3NvY2lhdGVkIHdpdGggZWxlbWVudC5cclxuXHQgICAgICovXHJcblx0ICAgIFBvd2VyQmkucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcblx0ICAgICAgICB2YXIgcG93ZXJCaUVsZW1lbnQgPSBlbGVtZW50O1xyXG5cdCAgICAgICAgaWYgKCFwb3dlckJpRWxlbWVudC5wb3dlckJpRW1iZWQpIHtcclxuXHQgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJZb3UgYXR0ZW1wdGVkIHRvIGdldCBhbiBpbnN0YW5jZSBvZiBwb3dlcmJpIGNvbXBvbmVudCBhc3NvY2lhdGVkIHdpdGggZWxlbWVudDogXCIgKyBlbGVtZW50Lm91dGVySFRNTCArIFwiIGJ1dCB0aGVyZSB3YXMgbm8gYXNzb2NpYXRlZCBpbnN0YW5jZS5cIik7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICByZXR1cm4gcG93ZXJCaUVsZW1lbnQucG93ZXJCaUVtYmVkO1xyXG5cdCAgICB9O1xyXG5cdCAgICAvKipcclxuXHQgICAgICogUmVtb3ZlIGNvbXBvbmVudCBmcm9tIHRoZSBsaXN0IG9mIGVtYmVkZGVkIGNvbXBvbmVudHMuXHJcblx0ICAgICAqL1xyXG5cdCAgICBQb3dlckJpLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoY29tcG9uZW50KSB7XHJcblx0ICAgICAgICB1dGlsXzEuZGVmYXVsdC5yZW1vdmUoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHggPT09IGNvbXBvbmVudDsgfSwgdGhpcy5lbWJlZHMpO1xyXG5cdCAgICB9O1xyXG5cdCAgICAvKipcclxuXHQgICAgICogSGFuZGxlciBmb3Igd2luZG93IG1lc3NhZ2UgZXZlbnQuXHJcblx0ICAgICAqIFBhcnNlcyBldmVudCBkYXRhIGFzIGpzb24gYW5kIGlmIGl0IGNhbWUgZnJvbSBhbiBpZnJhbWUgdGhhdCBtYXRjaGVzIG9uZSBmcm9tIGFuIGV4aXN0aW5nIGVtYmVkZWQgY29tcG9uZW50IHJlLWRpc3BhdGNoZXMgdGhlIGV2ZW50IG9uIHRoZSBpZnJhbWUncyBwYXJlbnQgZWxlbWVudFxyXG5cdCAgICAgKiB0byBzaW11bGF0ZSB0aGUgZXZlbnQgYnViYmxpbmcgdGhyb3VnaCB0aGUgdHdvIHNlcGFyYXRlIHdpbmRvd3MgLyBET01zLlxyXG5cdCAgICAgKlxyXG5cdCAgICAgKiBJZiBhbiBlcnJvciBvY2N1cnMgd2hlbiBwYXJzaW5nIGV2ZW50LmRhdGEgY2FsbCBlcnJvciBoYW5kbGVyIHByb3ZpZGVkIGR1cmluZyBjb25maWd1cmF0aW9uLlxyXG5cdCAgICAgKi9cclxuXHQgICAgUG93ZXJCaS5wcm90b3R5cGUub25SZWNlaXZlTWVzc2FnZSA9IGZ1bmN0aW9uIChldmVudCkge1xyXG5cdCAgICAgICAgaWYgKCFldmVudCkge1xyXG5cdCAgICAgICAgICAgIHJldHVybjtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIHRyeSB7XHJcblx0ICAgICAgICAgICAgLy8gT25seSByYWlzZSB0aGUgZXZlbnQgb24gdGhlIGVtYmVkIHRoYXQgbWF0Y2hlcyB0aGUgcG9zdCBtZXNzYWdlIG9yaWdpblxyXG5cdCAgICAgICAgICAgIHZhciBlbWJlZCA9IHV0aWxfMS5kZWZhdWx0LmZpbmQoZnVuY3Rpb24gKGVtYmVkKSB7IHJldHVybiBldmVudC5zb3VyY2UgPT09IGVtYmVkLmlmcmFtZS5jb250ZW50V2luZG93OyB9LCB0aGlzLmVtYmVkcyk7XHJcblx0ICAgICAgICAgICAgaWYgKGVtYmVkKSB7XHJcblx0ICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlRGF0YSA9IHR5cGVvZiBldmVudC5kYXRhID09PSAnc3RyaW5nJyA/IEpTT04ucGFyc2UoZXZlbnQuZGF0YSkgOiBldmVudC5kYXRhO1xyXG5cdCAgICAgICAgICAgICAgICB1dGlsXzEuZGVmYXVsdC5yYWlzZUN1c3RvbUV2ZW50KGVtYmVkLmVsZW1lbnQsIFBvd2VyQmkuZXZlbnRNYXBbbWVzc2FnZURhdGEuZXZlbnRdLCBtZXNzYWdlRGF0YSk7XHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgY2F0Y2ggKGUpIHtcclxuXHQgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuY29uZmlnLm9uRXJyb3IgPT09ICdmdW5jdGlvbicpIHtcclxuXHQgICAgICAgICAgICAgICAgdGhpcy5jb25maWcub25FcnJvci5jYWxsKHdpbmRvdywgZSk7XHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgICAgIGVsc2Uge1xyXG5cdCAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgIH1cclxuXHQgICAgfTtcclxuXHQgICAgLyoqXHJcblx0ICAgICAqIExpc3Qgb2YgY29tcG9uZW50cyB0aGlzIHNlcnZpY2UgY2FuIGVtYmVkLlxyXG5cdCAgICAgKi9cclxuXHQgICAgUG93ZXJCaS5jb21wb25lbnRzID0gW1xyXG5cdCAgICAgICAgdGlsZV8xLmRlZmF1bHQsXHJcblx0ICAgICAgICByZXBvcnRfMS5kZWZhdWx0XHJcblx0ICAgIF07XHJcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBNYXBwaW5nIG9mIGV2ZW50IG5hbWVzIGZyb20gaWZyYW1lIHBvc3RNZXNzYWdlIHRvIHRoZWlyIG5hbWUgcGVyY2lldmVkIGJ5IHBhcmVudCBET00uXHJcblx0ICAgICAqIEV4YW1wbGU6IFVzZXIgY2xpY2tzIG9uIGVtYmVkZWQgcmVwb3J0IHdoaWNoIGlzIGluc2lkZSBpZnJhbWUuIFRoZSBpZnJhbWUgY29kZSByZXNlbmRzXHJcblx0ICAgICAqIGV2ZW50IGFzIHBvc3RNZXNzYWdlIHdpdGggeyBldmVudDogJ3JlcG9ydENsaWNrZWQnLCAuLi4gfSBhbmQgdGhpcyBuYW1lIGlzIGNvbnZlcnRlZCB0byBoeXBoZW5hdGVkXHJcblx0ICAgICAqIG5hbWUgYW5kIGRpc3BhdGNoZWQgZnJvbSB0aGUgcGFyZW50IGVsZW1lbnQgb2YgdGhlIGlmcmFtZSB0byBzaW11bGF0ZSB0aGUgZXZlbnQgYnViYmxpbmcgdGhyb3VnaCB0d29cclxuXHQgICAgICogZGlmZmVyZW50IHdpbmRvd3MgLyBET01zXHJcblx0ICAgICAqL1xyXG5cdCAgICBQb3dlckJpLmV2ZW50TWFwID0ge1xyXG5cdCAgICAgICAgJ3RpbGVDbGlja2VkJzogJ3RpbGUtY2xpY2snLFxyXG5cdCAgICAgICAgJ3RpbGVMb2FkZWQnOiAndGlsZS1sb2FkJyxcclxuXHQgICAgICAgICdyZXBvcnRQYWdlTG9hZGVkJzogJ3JlcG9ydC1sb2FkJ1xyXG5cdCAgICB9O1xyXG5cdCAgICAvKipcclxuXHQgICAgICogRGVmYXVsdCBjb25maWd1cmF0aW9uIGZvciBzZXJ2aWNlLlxyXG5cdCAgICAgKi9cclxuXHQgICAgUG93ZXJCaS5kZWZhdWx0Q29uZmlnID0ge1xyXG5cdCAgICAgICAgYXV0b0VtYmVkT25Db250ZW50TG9hZGVkOiBmYWxzZSxcclxuXHQgICAgICAgIG9uRXJyb3I6IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG5cdCAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcblx0ICAgICAgICAgICAgICAgIGFyZ3NbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgICAgIHJldHVybiBjb25zb2xlLmxvZyhhcmdzWzBdLCBhcmdzLnNsaWNlKDEpKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgfTtcclxuXHQgICAgcmV0dXJuIFBvd2VyQmk7XHJcblx0fSgpKTtcclxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcblx0ZXhwb3J0cy5kZWZhdWx0ID0gUG93ZXJCaTtcclxuXG5cbi8qKiovIH0sXG4vKiAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHR2YXIgdXRpbF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcclxuXHR2YXIgRW1iZWQgPSAoZnVuY3Rpb24gKCkge1xyXG5cdCAgICBmdW5jdGlvbiBFbWJlZChlbGVtZW50LCBvcHRpb25zKSB7XHJcblx0ICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG5cdCAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcclxuXHQgICAgICAgIC8vIFRPRE86IENoYW5nZSB3aGVuIE9iamVjdC5hc3NpZ24gaXMgYXZhaWxhYmxlLlxyXG5cdCAgICAgICAgdGhpcy5vcHRpb25zID0gdXRpbF8xLmRlZmF1bHQuYXNzaWduKHt9LCBFbWJlZC5kZWZhdWx0T3B0aW9ucywgb3B0aW9ucyk7XHJcblx0ICAgICAgICB0aGlzLm9wdGlvbnMuYWNjZXNzVG9rZW4gPSB0aGlzLmdldEFjY2Vzc1Rva2VuKCk7XHJcblx0ICAgICAgICB0aGlzLm9wdGlvbnMuZW1iZWRVcmwgPSB0aGlzLmdldEVtYmVkVXJsKCk7XHJcblx0ICAgICAgICB2YXIgaWZyYW1lSHRtbCA9IFwiPGlmcmFtZSBzdHlsZT1cXFwid2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtcXFwiIHNyYz1cXFwiXCIgKyB0aGlzLm9wdGlvbnMuZW1iZWRVcmwgKyBcIlxcXCIgc2Nyb2xsaW5nPVxcXCJub1xcXCIgYWxsb3dmdWxsc2NyZWVuPVxcXCJ0cnVlXFxcIj48L2lmcmFtZT5cIjtcclxuXHQgICAgICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSBpZnJhbWVIdG1sO1xyXG5cdCAgICAgICAgdGhpcy5pZnJhbWUgPSB0aGlzLmVsZW1lbnQuY2hpbGROb2Rlc1swXTtcclxuXHQgICAgICAgIHRoaXMuaWZyYW1lLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5sb2FkKF90aGlzLm9wdGlvbnMsIGZhbHNlKTsgfSwgZmFsc2UpO1xyXG5cdCAgICB9XHJcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBIYW5kbGVyIGZvciB3aGVuIHRoZSBpZnJhbWUgaGFzIGZpbmlzaGVkIGxvYWRpbmcgdGhlIHBvd2VyYmkgcGxhY2Vob2xkZXIgcGFnZS5cclxuXHQgICAgICogVGhpcyBpcyB1c2VkIHRvIGluamVjdCBjb25maWd1cmF0aW9uIG9wdGlvbnMgc3VjaCBhcyBhY2Nlc3MgdG9rZW4sIGxvYWRBY3Rpb24sIGV0Y1xyXG5cdCAgICAgKiB3aGljaCBhbGxvdyBpZnJhbWUgdG8gbG9hZCB0aGUgYWN0dWFsIHJlcG9ydCB3aXRoIGF1dGhlbnRpY2F0aW9uLlxyXG5cdCAgICAgKi9cclxuXHQgICAgRW1iZWQucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAob3B0aW9ucywgcmVxdWlyZUlkLCBtZXNzYWdlKSB7XHJcblx0ICAgICAgICBpZiAocmVxdWlyZUlkID09PSB2b2lkIDApIHsgcmVxdWlyZUlkID0gZmFsc2U7IH1cclxuXHQgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IG51bGw7IH1cclxuXHQgICAgICAgIGlmICghbWVzc2FnZSkge1xyXG5cdCAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIllvdSBjYWxsZWQgbG9hZCB3aXRob3V0IHByb3ZpZGluZyBtZXNzYWdlIHByb3BlcnRpZXMgZnJvbSB0aGUgY29uY3JldGUgZW1iZWRkYWJsZSBjbGFzcy5cIik7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICB2YXIgYmFzZU1lc3NhZ2UgPSB7XHJcblx0ICAgICAgICAgICAgYWNjZXNzVG9rZW46IG9wdGlvbnMuYWNjZXNzVG9rZW5cclxuXHQgICAgICAgIH07XHJcblx0ICAgICAgICB1dGlsXzEuZGVmYXVsdC5hc3NpZ24obWVzc2FnZSwgYmFzZU1lc3NhZ2UpO1xyXG5cdCAgICAgICAgdmFyIGV2ZW50ID0ge1xyXG5cdCAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VcclxuXHQgICAgICAgIH07XHJcblx0ICAgICAgICB1dGlsXzEuZGVmYXVsdC5yYWlzZUN1c3RvbUV2ZW50KHRoaXMuZWxlbWVudCwgZXZlbnQubWVzc2FnZS5hY3Rpb24sIGV2ZW50KTtcclxuXHQgICAgICAgIHRoaXMuaWZyYW1lLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UoSlNPTi5zdHJpbmdpZnkoZXZlbnQubWVzc2FnZSksICcqJyk7XHJcblx0ICAgIH07XHJcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBHZXQgYWNjZXNzIHRva2VuIGZyb20gZmlyc3QgYXZhaWxhYmxlIGxvY2F0aW9uOiBvcHRpb25zLCBhdHRyaWJ1dGUsIGdsb2JhbC5cclxuXHQgICAgICovXHJcblx0ICAgIEVtYmVkLnByb3RvdHlwZS5nZXRBY2Nlc3NUb2tlbiA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHZhciBhY2Nlc3NUb2tlbiA9IHRoaXMub3B0aW9ucy5hY2Nlc3NUb2tlbiB8fCB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKEVtYmVkLmFjY2Vzc1Rva2VuQXR0cmlidXRlKSB8fCB0aGlzLm9wdGlvbnMuZ2V0R2xvYmFsQWNjZXNzVG9rZW4oKTtcclxuXHQgICAgICAgIGlmICghYWNjZXNzVG9rZW4pIHtcclxuXHQgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBhY2Nlc3MgdG9rZW4gd2FzIGZvdW5kIGZvciBlbGVtZW50LiBZb3UgbXVzdCBzcGVjaWZ5IGFuIGFjY2VzcyB0b2tlbiBkaXJlY3RseSBvbiB0aGUgZWxlbWVudCB1c2luZyBhdHRyaWJ1dGUgJ1wiICsgRW1iZWQuYWNjZXNzVG9rZW5BdHRyaWJ1dGUgKyBcIicgb3Igc3BlY2lmeSBhIGdsb2JhbCB0b2tlbiBhdDogcG93ZXJiaS5hY2Nlc3NUb2tlbi5cIik7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICByZXR1cm4gYWNjZXNzVG9rZW47XHJcblx0ICAgIH07XHJcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBHZXQgZW1iZWQgdXJsIGZyb20gZmlyc3QgYXZhaWxhYmxlIGxvY2F0aW9uOiBvcHRpb25zLCBhdHRyaWJ1dGUuXHJcblx0ICAgICAqL1xyXG5cdCAgICBFbWJlZC5wcm90b3R5cGUuZ2V0RW1iZWRVcmwgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICB2YXIgZW1iZWRVcmwgPSB0aGlzLm9wdGlvbnMuZW1iZWRVcmwgfHwgdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShFbWJlZC5lbWJlZFVybEF0dHJpYnV0ZSk7XHJcblx0ICAgICAgICBpZiAodHlwZW9mIGVtYmVkVXJsICE9PSAnc3RyaW5nJyB8fCBlbWJlZFVybC5sZW5ndGggPT09IDApIHtcclxuXHQgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFbWJlZCBVcmwgaXMgcmVxdWlyZWQsIGJ1dCBpdCB3YXMgbm90IGZvdW5kLiBZb3UgbXVzdCBwcm92aWRlIGFuIGVtYmVkIHVybCBlaXRoZXIgYXMgcGFydCBvZiBlbWJlZCBjb25maWd1cmF0aW9uIG9yIGFzIGF0dHJpYnV0ZSAnXCIgKyBFbWJlZC5lbWJlZFVybEF0dHJpYnV0ZSArIFwiJy5cIik7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICByZXR1cm4gZW1iZWRVcmw7XHJcblx0ICAgIH07XHJcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBSZXF1ZXN0IHRoZSBicm93c2VyIHRvIG1ha2UgdGhlIGNvbXBvbmVudHMgaWZyYW1lIGZ1bGxzY3JlZW4uXHJcblx0ICAgICAqL1xyXG5cdCAgICBFbWJlZC5wcm90b3R5cGUuZnVsbHNjcmVlbiA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHZhciByZXF1ZXN0RnVsbFNjcmVlbiA9IHRoaXMuaWZyYW1lLnJlcXVlc3RGdWxsc2NyZWVuIHx8IHRoaXMuaWZyYW1lLm1zUmVxdWVzdEZ1bGxzY3JlZW4gfHwgdGhpcy5pZnJhbWUubW96UmVxdWVzdEZ1bGxTY3JlZW4gfHwgdGhpcy5pZnJhbWUud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW47XHJcblx0ICAgICAgICByZXF1ZXN0RnVsbFNjcmVlbi5jYWxsKHRoaXMuaWZyYW1lKTtcclxuXHQgICAgfTtcclxuXHQgICAgLyoqXHJcblx0ICAgICAqIEV4aXQgZnVsbHNjcmVlbi5cclxuXHQgICAgICovXHJcblx0ICAgIEVtYmVkLnByb3RvdHlwZS5leGl0RnVsbHNjcmVlbiA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIGlmICghdGhpcy5pc0Z1bGxzY3JlZW4odGhpcy5pZnJhbWUpKSB7XHJcblx0ICAgICAgICAgICAgcmV0dXJuO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgdmFyIGV4aXRGdWxsc2NyZWVuID0gZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4gfHwgZG9jdW1lbnQubW96Q2FuY2VsRnVsbFNjcmVlbiB8fCBkb2N1bWVudC53ZWJraXRFeGl0RnVsbHNjcmVlbiB8fCBkb2N1bWVudC5tc0V4aXRGdWxsc2NyZWVuO1xyXG5cdCAgICAgICAgZXhpdEZ1bGxzY3JlZW4uY2FsbChkb2N1bWVudCk7XHJcblx0ICAgIH07XHJcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBSZXR1cm4gdHJ1ZSBpZiBpZnJhbWUgaXMgZnVsbHNjcmVlbixcclxuXHQgICAgICogb3RoZXJ3aXNlIHJldHVybiBmYWxzZVxyXG5cdCAgICAgKi9cclxuXHQgICAgRW1iZWQucHJvdG90eXBlLmlzRnVsbHNjcmVlbiA9IGZ1bmN0aW9uIChpZnJhbWUpIHtcclxuXHQgICAgICAgIHZhciBvcHRpb25zID0gWydmdWxsc2NyZWVuRWxlbWVudCcsICd3ZWJraXRGdWxsc2NyZWVuRWxlbWVudCcsICdtb3pGdWxsc2NyZWVuU2NyZWVuRWxlbWVudCcsICdtc0Z1bGxzY3JlZW5FbGVtZW50J107XHJcblx0ICAgICAgICByZXR1cm4gb3B0aW9ucy5zb21lKGZ1bmN0aW9uIChvcHRpb24pIHsgcmV0dXJuIGRvY3VtZW50W29wdGlvbl0gPT09IGlmcmFtZTsgfSk7XHJcblx0ICAgIH07XHJcblx0ICAgIEVtYmVkLmVtYmVkVXJsQXR0cmlidXRlID0gJ3Bvd2VyYmktZW1iZWQtdXJsJztcclxuXHQgICAgRW1iZWQuYWNjZXNzVG9rZW5BdHRyaWJ1dGUgPSAncG93ZXJiaS1hY2Nlc3MtdG9rZW4nO1xyXG5cdCAgICBFbWJlZC50eXBlQXR0cmlidXRlID0gJ3Bvd2VyYmktdHlwZSc7XHJcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBEZWZhdWx0IG9wdGlvbnMgZm9yIGVtYmVkZGFibGUgY29tcG9uZW50LlxyXG5cdCAgICAgKi9cclxuXHQgICAgRW1iZWQuZGVmYXVsdE9wdGlvbnMgPSB7XHJcblx0ICAgICAgICBmaWx0ZXJQYW5lRW5hYmxlZDogdHJ1ZVxyXG5cdCAgICB9O1xyXG5cdCAgICByZXR1cm4gRW1iZWQ7XHJcblx0fSgpKTtcclxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcblx0ZXhwb3J0cy5kZWZhdWx0ID0gRW1iZWQ7XHJcblxuXG4vKioqLyB9LFxuLyogMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0dmFyIFV0aWxzID0gKGZ1bmN0aW9uICgpIHtcclxuXHQgICAgZnVuY3Rpb24gVXRpbHMoKSB7XHJcblx0ICAgIH1cclxuXHQgICAgVXRpbHMucmFpc2VDdXN0b21FdmVudCA9IGZ1bmN0aW9uIChlbGVtZW50LCBldmVudE5hbWUsIGV2ZW50RGF0YSkge1xyXG5cdCAgICAgICAgdmFyIGN1c3RvbUV2ZW50O1xyXG5cdCAgICAgICAgaWYgKHR5cGVvZiBDdXN0b21FdmVudCA9PT0gJ2Z1bmN0aW9uJykge1xyXG5cdCAgICAgICAgICAgIGN1c3RvbUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KGV2ZW50TmFtZSwge1xyXG5cdCAgICAgICAgICAgICAgICBkZXRhaWw6IGV2ZW50RGF0YSxcclxuXHQgICAgICAgICAgICAgICAgYnViYmxlczogdHJ1ZSxcclxuXHQgICAgICAgICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxyXG5cdCAgICAgICAgICAgIH0pO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgZWxzZSB7XHJcblx0ICAgICAgICAgICAgY3VzdG9tRXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnQ3VzdG9tRXZlbnQnKTtcclxuXHQgICAgICAgICAgICBjdXN0b21FdmVudC5pbml0Q3VzdG9tRXZlbnQoZXZlbnROYW1lLCB0cnVlLCB0cnVlLCBldmVudERhdGEpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgZWxlbWVudC5kaXNwYXRjaEV2ZW50KGN1c3RvbUV2ZW50KTtcclxuXHQgICAgICAgIGlmIChjdXN0b21FdmVudC5kZWZhdWx0UHJldmVudGVkIHx8ICFjdXN0b21FdmVudC5yZXR1cm5WYWx1ZSkge1xyXG5cdCAgICAgICAgICAgIHJldHVybjtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIC8vIFRPRE86IFJlbW92ZSB0aGlzPyBTaG91bGQgYmUgYmV0dGVyIHdheSB0byBoYW5kbGUgZXZlbnRzIHRoYW4gdXNpbmcgZXZhbD9cclxuXHQgICAgICAgIC8vIFdoYXQgaXMgdXNlIGNhc2U/IDxkaXYgcG93ZXJiaS10eXBlPVwicmVwb3J0XCIgb25sb2FkPVwiYWxlcnQoJ2xvYWRlZCcpO1wiPjwvZGl2PlxyXG5cdCAgICAgICAgdmFyIGlubGluZUV2ZW50QXR0ciA9ICdvbicgKyBldmVudE5hbWUucmVwbGFjZSgnLScsICcnKTtcclxuXHQgICAgICAgIHZhciBpbmxpbmVTY3JpcHQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShpbmxpbmVFdmVudEF0dHIpO1xyXG5cdCAgICAgICAgaWYgKGlubGluZVNjcmlwdCkge1xyXG5cdCAgICAgICAgICAgIGV2YWwuY2FsbChlbGVtZW50LCBpbmxpbmVTY3JpcHQpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICB9O1xyXG5cdCAgICBVdGlscy5maW5kSW5kZXggPSBmdW5jdGlvbiAocHJlZGljYXRlLCB4cykge1xyXG5cdCAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHhzKSkge1xyXG5cdCAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIllvdSBhdHRlbXB0ZWQgdG8gY2FsbCBmaW5kIHdpdGggc2Vjb25kIHBhcmFtZXRlciB0aGF0IHdhcyBub3QgYW4gYXJyYXkuIFlvdSBwYXNzZWQ6IFwiICsgeHMpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgdmFyIGluZGV4O1xyXG5cdCAgICAgICAgeHMuc29tZShmdW5jdGlvbiAoeCwgaSkge1xyXG5cdCAgICAgICAgICAgIGlmIChwcmVkaWNhdGUoeCkpIHtcclxuXHQgICAgICAgICAgICAgICAgaW5kZXggPSBpO1xyXG5cdCAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICB9KTtcclxuXHQgICAgICAgIHJldHVybiBpbmRleDtcclxuXHQgICAgfTtcclxuXHQgICAgVXRpbHMuZmluZCA9IGZ1bmN0aW9uIChwcmVkaWNhdGUsIHhzKSB7XHJcblx0ICAgICAgICB2YXIgaW5kZXggPSBVdGlscy5maW5kSW5kZXgocHJlZGljYXRlLCB4cyk7XHJcblx0ICAgICAgICByZXR1cm4geHNbaW5kZXhdO1xyXG5cdCAgICB9O1xyXG5cdCAgICBVdGlscy5yZW1vdmUgPSBmdW5jdGlvbiAocHJlZGljYXRlLCB4cykge1xyXG5cdCAgICAgICAgdmFyIGluZGV4ID0gVXRpbHMuZmluZEluZGV4KHByZWRpY2F0ZSwgeHMpO1xyXG5cdCAgICAgICAgeHMuc3BsaWNlKGluZGV4LCAxKTtcclxuXHQgICAgfTtcclxuXHQgICAgLy8gU2VlOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvYXNzaWduXHJcblx0ICAgIC8vIFRPRE86IHJlcGxhY2UgaW4gZmF2b3Igb2YgdXNpbmcgcG9seWZpbGxcclxuXHQgICAgVXRpbHMuYXNzaWduID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgdmFyIGFyZ3MgPSBbXTtcclxuXHQgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcblx0ICAgICAgICAgICAgYXJnc1tfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIHZhciB0YXJnZXQgPSBhcmdzWzBdO1xyXG5cdCAgICAgICAgJ3VzZSBzdHJpY3QnO1xyXG5cdCAgICAgICAgaWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkIHx8IHRhcmdldCA9PT0gbnVsbCkge1xyXG5cdCAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjb252ZXJ0IHVuZGVmaW5lZCBvciBudWxsIHRvIG9iamVjdCcpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgdmFyIG91dHB1dCA9IE9iamVjdCh0YXJnZXQpO1xyXG5cdCAgICAgICAgZm9yICh2YXIgaW5kZXggPSAxOyBpbmRleCA8IGFyZ3VtZW50cy5sZW5ndGg7IGluZGV4KyspIHtcclxuXHQgICAgICAgICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2luZGV4XTtcclxuXHQgICAgICAgICAgICBpZiAoc291cmNlICE9PSB1bmRlZmluZWQgJiYgc291cmNlICE9PSBudWxsKSB7XHJcblx0ICAgICAgICAgICAgICAgIGZvciAodmFyIG5leHRLZXkgaW4gc291cmNlKSB7XHJcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoc291cmNlLmhhc093blByb3BlcnR5KG5leHRLZXkpKSB7XHJcblx0ICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0W25leHRLZXldID0gc291cmNlW25leHRLZXldO1xyXG5cdCAgICAgICAgICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgcmV0dXJuIG91dHB1dDtcclxuXHQgICAgfTtcclxuXHQgICAgcmV0dXJuIFV0aWxzO1xyXG5cdH0oKSk7XHJcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5cdGV4cG9ydHMuZGVmYXVsdCA9IFV0aWxzO1xyXG5cblxuLyoqKi8gfSxcbi8qIDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcclxuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XHJcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcblx0fTtcclxuXHR2YXIgZW1iZWRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XHJcblx0dmFyIFJlcG9ydCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcblx0ICAgIF9fZXh0ZW5kcyhSZXBvcnQsIF9zdXBlcik7XHJcblx0ICAgIGZ1bmN0aW9uIFJlcG9ydCgpIHtcclxuXHQgICAgICAgIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG5cdCAgICB9XHJcblx0ICAgIFJlcG9ydC5wcm90b3R5cGUuZ2V0RW1iZWRVcmwgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICB2YXIgZW1iZWRVcmwgPSBfc3VwZXIucHJvdG90eXBlLmdldEVtYmVkVXJsLmNhbGwodGhpcyk7XHJcblx0ICAgICAgICAvLyBUT0RPOiBOZWVkIHNhZmUgd2F5IHRvIGFkZCB1cmwgcGFyYW1ldGVycy5cclxuXHQgICAgICAgIC8vIFdlIGFyZSBhc3N1bWluZyBlbWJlZFVybHMgdXNlIHF1ZXJ5IHBhcmFtZXRlcnMgdG8gc3VwcGx5IGlkIG9mIHZpc3VhbFxyXG5cdCAgICAgICAgLy8gc28gbXVzdCBwcmVmaXggd2l0aCAnJicuXHJcblx0ICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5maWx0ZXJQYW5lRW5hYmxlZCkge1xyXG5cdCAgICAgICAgICAgIGVtYmVkVXJsICs9IFwiJmZpbHRlclBhbmVFbmFibGVkPWZhbHNlXCI7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICByZXR1cm4gZW1iZWRVcmw7XHJcblx0ICAgIH07XHJcblx0ICAgIFJlcG9ydC5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uIChvcHRpb25zLCByZXF1aXJlSWQpIHtcclxuXHQgICAgICAgIGlmIChyZXF1aXJlSWQgPT09IHZvaWQgMCkgeyByZXF1aXJlSWQgPSBmYWxzZTsgfVxyXG5cdCAgICAgICAgaWYgKHJlcXVpcmVJZCAmJiB0eXBlb2Ygb3B0aW9ucy5pZCAhPT0gJ3N0cmluZycpIHtcclxuXHQgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpZCBtdXN0IGJlIHNwZWNpZmllZCB3aGVuIGxvYWRpbmcgcmVwb3J0cyBvbiBleGlzdGluZyBlbGVtZW50cy5cIik7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICB2YXIgbWVzc2FnZSA9IHtcclxuXHQgICAgICAgICAgICBhY3Rpb246ICdsb2FkUmVwb3J0JyxcclxuXHQgICAgICAgICAgICByZXBvcnRJZDogb3B0aW9ucy5pZCxcclxuXHQgICAgICAgICAgICBhY2Nlc3NUb2tlbjogbnVsbFxyXG5cdCAgICAgICAgfTtcclxuXHQgICAgICAgIF9zdXBlci5wcm90b3R5cGUubG9hZC5jYWxsKHRoaXMsIG9wdGlvbnMsIHJlcXVpcmVJZCwgbWVzc2FnZSk7XHJcblx0ICAgIH07XHJcblx0ICAgIHJldHVybiBSZXBvcnQ7XHJcblx0fShlbWJlZF8xLmRlZmF1bHQpKTtcclxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcblx0ZXhwb3J0cy5kZWZhdWx0ID0gUmVwb3J0O1xyXG5cblxuLyoqKi8gfSxcbi8qIDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcclxuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XHJcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcblx0fTtcclxuXHR2YXIgZW1iZWRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XHJcblx0dmFyIFRpbGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG5cdCAgICBfX2V4dGVuZHMoVGlsZSwgX3N1cGVyKTtcclxuXHQgICAgZnVuY3Rpb24gVGlsZSgpIHtcclxuXHQgICAgICAgIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG5cdCAgICB9XHJcblx0ICAgIFRpbGUucHJvdG90eXBlLmdldEVtYmVkVXJsID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgdmFyIGVtYmVkVXJsID0gX3N1cGVyLnByb3RvdHlwZS5nZXRFbWJlZFVybC5jYWxsKHRoaXMpO1xyXG5cdCAgICAgICAgcmV0dXJuIGVtYmVkVXJsO1xyXG5cdCAgICB9O1xyXG5cdCAgICBUaWxlLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKG9wdGlvbnMsIHJlcXVpcmVJZCkge1xyXG5cdCAgICAgICAgaWYgKHJlcXVpcmVJZCA9PT0gdm9pZCAwKSB7IHJlcXVpcmVJZCA9IGZhbHNlOyB9XHJcblx0ICAgICAgICBpZiAocmVxdWlyZUlkICYmIHR5cGVvZiBvcHRpb25zLmlkICE9PSAnc3RyaW5nJykge1xyXG5cdCAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImlkIG11c3QgYmUgc3BlY2lmaWVkIHdoZW4gbG9hZGluZyByZXBvcnRzIG9uIGV4aXN0aW5nIGVsZW1lbnRzLlwiKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIHZhciBtZXNzYWdlID0ge1xyXG5cdCAgICAgICAgICAgIGFjdGlvbjogJ2xvYWRUaWxlJyxcclxuXHQgICAgICAgICAgICB0aWxlSWQ6IG9wdGlvbnMuaWQsXHJcblx0ICAgICAgICAgICAgYWNjZXNzVG9rZW46IG51bGxcclxuXHQgICAgICAgIH07XHJcblx0ICAgICAgICBfc3VwZXIucHJvdG90eXBlLmxvYWQuY2FsbCh0aGlzLCBvcHRpb25zLCByZXF1aXJlSWQsIG1lc3NhZ2UpO1xyXG5cdCAgICB9O1xyXG5cdCAgICByZXR1cm4gVGlsZTtcclxuXHR9KGVtYmVkXzEuZGVmYXVsdCkpO1xyXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuXHRleHBvcnRzLmRlZmF1bHQgPSBUaWxlO1xyXG5cblxuLyoqKi8gfVxuLyoqKioqKi8gXSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wb3dlcmJpLmpzLm1hcCJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
