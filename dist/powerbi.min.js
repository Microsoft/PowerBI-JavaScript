!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var o=n(1);window.Powerbi=o["default"],window.powerbi=new o["default"]},function(e,t,n){"use strict";var o=n(2),r=n(4),i=n(5),s=n(3),u=function(){function e(t){void 0===t&&(t={}),this.embeds=[],window.addEventListener("message",this.onReceiveMessage.bind(this),!1),this.config=s["default"].assign({},e.defaultConfig,t),this.config.autoEmbedOnContentLoaded&&this.enableAutoEmbed()}return e.prototype.init=function(e){var t=this;e=e&&e instanceof HTMLElement?e:document.body;var n=Array.prototype.slice.call(e.querySelectorAll("["+o["default"].embedUrlAttribute+"]"));n.forEach(function(e){return t.embed(e)})},e.prototype.embed=function(t,n){var i=this;void 0===n&&(n={});var u,a=t;if(a.powerBiEmbed&&!n.overwrite)return u=a.powerBiEmbed;a.powerBiEmbed&&n.overwrite&&this.remove(a.powerBiEmbed);var l=s["default"].find(function(e){return n.type===e.type||t.getAttribute(o["default"].typeAttribute)===e.type},e.components);if(!l)throw new Error("Attempted to embed using config "+JSON.stringify(n)+" on element "+t.outerHTML+", but could not determine what type of component to embed. You must specify a type in the configuration or as an attribute such as '"+o["default"].typeAttribute+'="'+r["default"].name+"\"'.");return n.getGlobalAccessToken=function(){return i.accessToken},u=new l(t,n),a.powerBiEmbed=u,this.embeds.push(u),u},e.prototype.enableAutoEmbed=function(){var e=this;window.addEventListener("DOMContentLoaded",function(t){return e.init(document.body)},!1)},e.prototype.remove=function(e){s["default"].remove(function(t){return t===e},this.embeds)},e.prototype.onReceiveMessage=function(t){if(t)try{var n=s["default"].find(function(e){return t.source===e.iframe.contentWindow},this.embeds);if(n){var o="string"==typeof t.data?JSON.parse(t.data):t.data;s["default"].raiseCustomEvent(n.element,e.eventMap[o.event],o)}}catch(r){if("function"!=typeof this.config.onError)throw r;this.config.onError.call(window,r)}},e.components=[i["default"],r["default"]],e.eventMap={tileClicked:"tile-click",tileLoaded:"tile-load",reportPageLoaded:"report-load"},e.defaultConfig={autoEmbedOnContentLoaded:!1,onError:function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return console.log(e[0],e.slice(1))}},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=u},function(e,t,n){"use strict";var o=n(3),r=function(){function e(t,n){this.element=t,this.options=o["default"].assign({},e.defaultOptions,n),this.options.accessToken=this.getAccessToken();var r=this.getEmbedUrl(),i='<iframe style="width:100%;height:100%;" src="'+r+'" scrolling="no" allowfullscreen="true"></iframe>';this.element.innerHTML=i,this.iframe=this.element.childNodes[0],this.iframe.addEventListener("load",this.load.bind(this),!1)}return e.prototype.load=function(){var e=window.getComputedStyle(this.element),t={message:{action:this.options.loadAction,accessToken:this.options.accessToken,width:e.width,height:e.height}};o["default"].raiseCustomEvent(this.element,"embed-init",t),this.iframe.contentWindow.postMessage(JSON.stringify(t.message),"*")},e.prototype.getAccessToken=function(){var t=this.options.accessToken||this.element.getAttribute(e.accessTokenAttribute)||this.options.getGlobalAccessToken();if(!t)throw new Error("No access token was found for element. You must specify an access token directly on the element using attribute '"+e.accessTokenAttribute+"' or specify a global token at: powerbi.accessToken.");return t},e.prototype.getEmbedUrl=function(){var t=this.options.embedUrl||this.element.getAttribute(e.embedUrlAttribute);if("string"!=typeof t||0===t.length)throw new Error("Embed Url is required, but it was not found. You must provide an embed url either as part of embed configuration or as attribute '"+e.embedUrlAttribute+"'.");return t},e.prototype.fullscreen=function(){var e=this.iframe.requestFullscreen||this.iframe.msRequestFullscreen||this.iframe.mozRequestFullScreen||this.iframe.webkitRequestFullscreen;e.call(this.iframe)},e.prototype.exitFullscreen=function(){if(this.isFullscreen(this.iframe)){var e=document.exitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.msExitFullscreen;e.call(document)}},e.prototype.isFullscreen=function(e){var t=["fullscreenElement","webkitFullscreenElement","mozFullscreenScreenElement","msFullscreenElement"];return t.some(function(t){return document[t]===e})},e.embedUrlAttribute="powerbi-embed-url",e.accessTokenAttribute="powerbi-access-token",e.typeAttribute="powerbi-type",e.defaultOptions={filterPaneEnabled:!0,overwrite:!0},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r},function(e,t){"use strict";var n=function(){function e(){}return e.raiseCustomEvent=function(e,t,n){var o;if("function"==typeof window.CustomEvent?o=new CustomEvent(t,{detail:n,bubbles:!0,cancelable:!0}):(o=document.createEvent("CustomEvent"),o.initCustomEvent(t,!0,!0,n)),e.dispatchEvent(o),!o.defaultPrevented&&o.returnValue){var r="on"+t.replace("-",""),i=e.getAttribute(r);i&&eval.call(e,i)}},e.findIndex=function(e,t){if(!Array.isArray(t))throw new Error("You attempted to call find with second parameter that was not an array. You passed: "+t);var n;return t.some(function(t,o){return e(t)?(n=o,!0):void 0}),n},e.find=function(t,n){var o=e.findIndex(t,n);return n[o]},e.remove=function(t,n){var o=e.findIndex(t,n);n.splice(o,1)},e.assign=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=e[0];if(void 0===n||null===n)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(n),r=1;r<arguments.length;r++){var i=arguments[r];if(void 0!==i&&null!==i)for(var s in i)i.hasOwnProperty(s)&&(o[s]=i[s])}return o},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},function(e,t,n){"use strict";var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=n(2),i=function(e){function t(t,n){n.loadAction="loadReport",e.call(this,t,n)}return o(t,e),t.prototype.getEmbedUrl=function(){var t=e.prototype.getEmbedUrl.call(this);return this.options.filterPaneEnabled||(t+="&filterPaneEnabled=false"),t},t.type="report",t}(r["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i},function(e,t,n){"use strict";var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=n(2),i=function(e){function t(t,n){n.loadAction="loadTile",e.call(this,t,n)}return o(t,e),t.prototype.getEmbedUrl=function(){var t=e.prototype.getEmbedUrl.call(this);return t},t.type="tile",t}(r["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvd2VyYmkuanMiXSwibmFtZXMiOlsibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwibSIsImMiLCJwIiwiY29yZV8xIiwid2luZG93IiwiUG93ZXJiaSIsInBvd2VyYmkiLCJlbWJlZF8xIiwicmVwb3J0XzEiLCJ0aWxlXzEiLCJ1dGlsXzEiLCJQb3dlckJpIiwiY29uZmlnIiwidGhpcyIsImVtYmVkcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJvblJlY2VpdmVNZXNzYWdlIiwiYmluZCIsImFzc2lnbiIsImRlZmF1bHRDb25maWciLCJhdXRvRW1iZWRPbkNvbnRlbnRMb2FkZWQiLCJlbmFibGVBdXRvRW1iZWQiLCJwcm90b3R5cGUiLCJpbml0IiwiY29udGFpbmVyIiwiX3RoaXMiLCJIVE1MRWxlbWVudCIsImRvY3VtZW50IiwiYm9keSIsImVsZW1lbnRzIiwiQXJyYXkiLCJzbGljZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJlbWJlZFVybEF0dHJpYnV0ZSIsImZvckVhY2giLCJlbGVtZW50IiwiZW1iZWQiLCJpbnN0YW5jZSIsInBvd2VyQmlFbGVtZW50IiwicG93ZXJCaUVtYmVkIiwib3ZlcndyaXRlIiwicmVtb3ZlIiwiQ29tcG9uZW50IiwiZmluZCIsImNvbXBvbmVudCIsInR5cGUiLCJnZXRBdHRyaWJ1dGUiLCJ0eXBlQXR0cmlidXRlIiwiY29tcG9uZW50cyIsIkVycm9yIiwiSlNPTiIsInN0cmluZ2lmeSIsIm91dGVySFRNTCIsIm5hbWUiLCJnZXRHbG9iYWxBY2Nlc3NUb2tlbiIsImFjY2Vzc1Rva2VuIiwicHVzaCIsImV2ZW50IiwieCIsInNvdXJjZSIsImlmcmFtZSIsImNvbnRlbnRXaW5kb3ciLCJtZXNzYWdlRGF0YSIsImRhdGEiLCJwYXJzZSIsInJhaXNlQ3VzdG9tRXZlbnQiLCJldmVudE1hcCIsImUiLCJvbkVycm9yIiwidGlsZUNsaWNrZWQiLCJ0aWxlTG9hZGVkIiwicmVwb3J0UGFnZUxvYWRlZCIsImFyZ3MiLCJfaSIsImFyZ3VtZW50cyIsImxlbmd0aCIsImNvbnNvbGUiLCJsb2ciLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiRW1iZWQiLCJvcHRpb25zIiwiZGVmYXVsdE9wdGlvbnMiLCJnZXRBY2Nlc3NUb2tlbiIsImVtYmVkVXJsIiwiZ2V0RW1iZWRVcmwiLCJpZnJhbWVIdG1sIiwiaW5uZXJIVE1MIiwiY2hpbGROb2RlcyIsImxvYWQiLCJjb21wdXRlZFN0eWxlIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImluaXRFdmVudEFyZ3MiLCJtZXNzYWdlIiwiYWN0aW9uIiwibG9hZEFjdGlvbiIsIndpZHRoIiwiaGVpZ2h0IiwicG9zdE1lc3NhZ2UiLCJhY2Nlc3NUb2tlbkF0dHJpYnV0ZSIsImZ1bGxzY3JlZW4iLCJyZXF1ZXN0RnVsbFNjcmVlbiIsInJlcXVlc3RGdWxsc2NyZWVuIiwibXNSZXF1ZXN0RnVsbHNjcmVlbiIsIm1velJlcXVlc3RGdWxsU2NyZWVuIiwid2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4iLCJleGl0RnVsbHNjcmVlbiIsImlzRnVsbHNjcmVlbiIsIm1vekNhbmNlbEZ1bGxTY3JlZW4iLCJ3ZWJraXRFeGl0RnVsbHNjcmVlbiIsIm1zRXhpdEZ1bGxzY3JlZW4iLCJzb21lIiwib3B0aW9uIiwiZmlsdGVyUGFuZUVuYWJsZWQiLCJVdGlscyIsImV2ZW50TmFtZSIsImV2ZW50RGF0YSIsImN1c3RvbUV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJkZXRhaWwiLCJidWJibGVzIiwiY2FuY2VsYWJsZSIsImNyZWF0ZUV2ZW50IiwiaW5pdEN1c3RvbUV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsImRlZmF1bHRQcmV2ZW50ZWQiLCJyZXR1cm5WYWx1ZSIsImlubGluZUV2ZW50QXR0ciIsInJlcGxhY2UiLCJpbmxpbmVTY3JpcHQiLCJldmFsIiwiZmluZEluZGV4IiwicHJlZGljYXRlIiwieHMiLCJpc0FycmF5IiwiaW5kZXgiLCJpIiwic3BsaWNlIiwidGFyZ2V0IiwidW5kZWZpbmVkIiwiVHlwZUVycm9yIiwib3V0cHV0IiwibmV4dEtleSIsImhhc093blByb3BlcnR5IiwiX19leHRlbmRzIiwiZCIsImIiLCJfXyIsImNvbnN0cnVjdG9yIiwiY3JlYXRlIiwiUmVwb3J0IiwiX3N1cGVyIiwiVGlsZSJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsR0FLVCxRQUFTQyxHQUFvQkMsR0FHNUIsR0FBR0MsRUFBaUJELEdBQ25CLE1BQU9DLEdBQWlCRCxHQUFVRSxPQUduQyxJQUFJQyxHQUFTRixFQUFpQkQsSUFDN0JFLFdBQ0FFLEdBQUlKLEVBQ0pLLFFBQVEsRUFVVCxPQU5BUCxHQUFRRSxHQUFVTSxLQUFLSCxFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTSCxHQUcvREksRUFBT0UsUUFBUyxFQUdURixFQUFPRCxRQXZCZixHQUFJRCxLQXFDSixPQVRBRixHQUFvQlEsRUFBSVQsRUFHeEJDLEVBQW9CUyxFQUFJUCxFQUd4QkYsRUFBb0JVLEVBQUksR0FHakJWLEVBQW9CLEtBSy9CLFNBQVNJLEVBQVFELEVBQVNILEdBRS9CLFlBQ0EsSUFBSVcsR0FBU1gsRUFBb0IsRUFNakNZLFFBQU9DLFFBQVVGLEVBQUFBLFdBQ2pCQyxPQUFPRSxRQUFVLEdBQUlILEdBQUFBLFlBS2hCLFNBQVNQLEVBQVFELEVBQVNILEdBRS9CLFlBQ0EsSUFBSWUsR0FBVWYsRUFBb0IsR0FDOUJnQixFQUFXaEIsRUFBb0IsR0FDL0JpQixFQUFTakIsRUFBb0IsR0FDN0JrQixFQUFTbEIsRUFBb0IsR0FDN0JtQixFQUFXLFdBQ1gsUUFBU0EsR0FBUUMsR0FDRSxTQUFYQSxJQUFxQkEsTUFDekJDLEtBQUtDLFVBQ0xWLE9BQU9XLGlCQUFpQixVQUFXRixLQUFLRyxpQkFBaUJDLEtBQUtKLE9BQU8sR0FFckVBLEtBQUtELE9BQVNGLEVBQUFBLFdBQWVRLFVBQVdQLEVBQVFRLGNBQWVQLEdBQzNEQyxLQUFLRCxPQUFPUSww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V0FBYyxTQUFVQyxFQUFHQyxHQUVyRCxRQUFTQyxLQUFPdkksS0FBS3dJLFlBQWNILEVBRG5DLElBQUssR0FBSWhKLEtBQUtpSixHQUFPQSxFQUFFSCxlQUFlOUksS0FBSWdKLEVBQUVoSixHQUFLaUosRUFBRWpKLEdBRW5EZ0osR0FBRTVILFVBQWtCLE9BQU42SCxFQUFhckUsT0FBT3dFLE9BQU9ILElBQU1DLEVBQUc5SCxVQUFZNkgsRUFBRTdILFVBQVcsR0FBSThILEtBRS9FN0ksRUFBVWYsRUFBb0IsR0FDOUJpSyxFQUFRLFNBQVVELEdBRWxCLFFBQVNDLEdBQUt0SCxFQUFTK0MsR0FFbkJBLEVBQVFjLFdBQWEsV0FDckJ3RCxFQUFPekosS0FBS2MsS0FBTXNCLEVBQVMrQyxHQU8vQixNQVhBK0QsR0FBVVEsRUFBTUQsR0FNaEJDLEVBQUtuSSxVQUFVZ0UsWUFBYyxXQUN6QixHQUFJRCxHQUFXbUUsRUFBT2xJLFVBQVVnRSxZQUFZdkYsS0FBS2MsS0FDakQsT0FBT3dFLElBRVhvRSxFQUFLNUcsS0FBTyxPQUNMNEcsR0FDVGxKLEVBQUFBLFdBQ0Z1RSxRQUFPQyxlQUFlcEYsRUFBUyxjQUFnQnFGLE9BQU8sSUFDdERyRixFQUFBQSxXQUFrQjhKIiwiZmlsZSI6InBvd2VyYmkuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fSxcbi8qKioqKiovIFx0XHRcdGlkOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGxvYWRlZDogZmFsc2Vcbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBjb3JlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xyXG5cdC8qKlxyXG5cdCAqIE1ha2UgUG93ZXJCaSBhdmFpbGFibGUgb24gZ2xvYmFsIG9iamVjdCBmb3IgdXNlIGluIGFwcHMgd2l0aG91dCBtb2R1bGUgbG9hZGluZyBzdXBwb3J0LlxyXG5cdCAqIFNhdmUgY2xhc3MgdG8gYWxsb3cgY3JlYXRpbmcgYW4gaW5zdGFuY2Ugb2YgdGhlIHNlcnZpY2UuXHJcblx0ICogQ3JlYXRlIGluc3RhbmNlIG9mIGNsYXNzIHdpdGggZGVmYXVsdCBjb25maWcgZm9yIG5vcm1hbCB1c2FnZS5cclxuXHQgKi9cclxuXHR3aW5kb3cuUG93ZXJiaSA9IGNvcmVfMS5kZWZhdWx0O1xyXG5cdHdpbmRvdy5wb3dlcmJpID0gbmV3IGNvcmVfMS5kZWZhdWx0KCk7XHJcblxuXG4vKioqLyB9LFxuLyogMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0dmFyIGVtYmVkXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xyXG5cdHZhciByZXBvcnRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XHJcblx0dmFyIHRpbGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XHJcblx0dmFyIHV0aWxfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XHJcblx0dmFyIFBvd2VyQmkgPSAoZnVuY3Rpb24gKCkge1xyXG5cdCAgICBmdW5jdGlvbiBQb3dlckJpKGNvbmZpZykge1xyXG5cdCAgICAgICAgaWYgKGNvbmZpZyA9PT0gdm9pZCAwKSB7IGNvbmZpZyA9IHt9OyB9XHJcblx0ICAgICAgICB0aGlzLmVtYmVkcyA9IFtdO1xyXG5cdCAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB0aGlzLm9uUmVjZWl2ZU1lc3NhZ2UuYmluZCh0aGlzKSwgZmFsc2UpO1xyXG5cdCAgICAgICAgLy8gVE9ETzogQ2hhbmdlIHdoZW4gT2JqZWN0LmFzc2lnbiBpcyBhdmFpbGFibGUuXHJcblx0ICAgICAgICB0aGlzLmNvbmZpZyA9IHV0aWxfMS5kZWZhdWx0LmFzc2lnbih7fSwgUG93ZXJCaS5kZWZhdWx0Q29uZmlnLCBjb25maWcpO1xyXG5cdCAgICAgICAgaWYgKHRoaXMuY29uZmlnLmF1dG9FbWJlZE9uQ29udGVudExvYWRlZCkge1xyXG5cdCAgICAgICAgICAgIHRoaXMuZW5hYmxlQXV0b0VtYmVkKCk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgIH1cclxuXHQgICAgLyoqXHJcblx0ICAgICAqIEhhbmRsZXIgZm9yIERPTUNvbnRlbnRMb2FkZWQgd2hpY2ggc2VhcmNoZXMgRE9NIGZvciBlbGVtZW50cyBoYXZpbmcgJ3Bvd2VyYmktZW1iZWQtdXJsJyBhdHRyaWJ1dGVcclxuXHQgICAgICogYW5kIGF1dG9tYXRpY2FsbHkgYXR0ZW1wdHMgdG8gZW1iZWQgYSBwb3dlcmJpIGNvbXBvbmVudCBiYXNlZCBvbiBpbmZvcm1hdGlvbiBmcm9tIHRoZSBhdHRyaWJ1dGVzLlxyXG5cdCAgICAgKiBPbmx5IHJ1bnMgaWYgYGNvbmZpZy5hdXRvRW1iZWRPbkNvbnRlbnRMb2FkZWRgIGlzIHRydWUgd2hlbiB0aGUgc2VydmljZSBpcyBjcmVhdGVkLlxyXG5cdCAgICAgKi9cclxuXHQgICAgUG93ZXJCaS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uIChjb250YWluZXIpIHtcclxuXHQgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcblx0ICAgICAgICBjb250YWluZXIgPSAoY29udGFpbmVyICYmIGNvbnRhaW5lciBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSA/IGNvbnRhaW5lciA6IGRvY3VtZW50LmJvZHk7XHJcblx0ICAgICAgICB2YXIgZWxlbWVudHMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChjb250YWluZXIucXVlcnlTZWxlY3RvckFsbChcIltcIiArIGVtYmVkXzEuZGVmYXVsdC5lbWJlZFVybEF0dHJpYnV0ZSArIFwiXVwiKSk7XHJcblx0ICAgICAgICBlbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7IHJldHVybiBfdGhpcy5lbWJlZChlbGVtZW50KTsgfSk7XHJcblx0ICAgIH07XHJcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBHaXZlbiBhbiBodG1sIGVsZW1lbnQgZW1iZWQgY29tcG9uZW50IGJhc2VkIG9uIGNvbmZpZ3VyYXRpb24uXHJcblx0ICAgICAqIElmIGNvbXBvbmVudCBoYXMgYWxyZWFkeSBiZWVuIGNyZWF0ZWQgYW5kIGF0dGFjaGVkIHRvIGVsZWVtbnQgc2ltcGx5IHJldHVybiBpdCB0byBwcmV2ZW50IGNyZWF0aW5nIGR1cGxpY2F0ZSBjb21wb25lbnRzIGZvciBzYW1lIGVsZW1lbnQuXHJcblx0ICAgICAqL1xyXG5cdCAgICBQb3dlckJpLnByb3RvdHlwZS5lbWJlZCA9IGZ1bmN0aW9uIChlbGVtZW50LCBjb25maWcpIHtcclxuXHQgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcblx0ICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH1cclxuXHQgICAgICAgIHZhciBpbnN0YW5jZTtcclxuXHQgICAgICAgIHZhciBwb3dlckJpRWxlbWVudCA9IGVsZW1lbnQ7XHJcblx0ICAgICAgICBpZiAocG93ZXJCaUVsZW1lbnQucG93ZXJCaUVtYmVkICYmICFjb25maWcub3ZlcndyaXRlKSB7XHJcblx0ICAgICAgICAgICAgaW5zdGFuY2UgPSBwb3dlckJpRWxlbWVudC5wb3dlckJpRW1iZWQ7XHJcblx0ICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgLyoqIElmIGNvbXBvbmVudCBpcyBhbHJlYWR5IHJlZ2lzdGVyZWQgb24gdGhpcyBlbGVtZW50LCBidXQgd2UgYXJlIHN1cHBvc2VkIHRvIG92ZXJ3cml0ZSwgcmVtb3ZlIGV4aXN0aW5nIGNvbXBvbmVudCBmcm9tIHJlZ2lzdHJ5ICovXHJcblx0ICAgICAgICBpZiAocG93ZXJCaUVsZW1lbnQucG93ZXJCaUVtYmVkICYmIGNvbmZpZy5vdmVyd3JpdGUpIHtcclxuXHQgICAgICAgICAgICB0aGlzLnJlbW92ZShwb3dlckJpRWxlbWVudC5wb3dlckJpRW1iZWQpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgdmFyIENvbXBvbmVudCA9IHV0aWxfMS5kZWZhdWx0LmZpbmQoZnVuY3Rpb24gKGNvbXBvbmVudCkgeyByZXR1cm4gY29uZmlnLnR5cGUgPT09IGNvbXBvbmVudC50eXBlIHx8IGVsZW1lbnQuZ2V0QXR0cmlidXRlKGVtYmVkXzEuZGVmYXVsdC50eXBlQXR0cmlidXRlKSA9PT0gY29tcG9uZW50LnR5cGU7IH0sIFBvd2VyQmkuY29tcG9uZW50cyk7XHJcblx0ICAgICAgICBpZiAoIUNvbXBvbmVudCkge1xyXG5cdCAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkF0dGVtcHRlZCB0byBlbWJlZCB1c2luZyBjb25maWcgXCIgKyBKU09OLnN0cmluZ2lmeShjb25maWcpICsgXCIgb24gZWxlbWVudCBcIiArIGVsZW1lbnQub3V0ZXJIVE1MICsgXCIsIGJ1dCBjb3VsZCBub3QgZGV0ZXJtaW5lIHdoYXQgdHlwZSBvZiBjb21wb25lbnQgdG8gZW1iZWQuIFlvdSBtdXN0IHNwZWNpZnkgYSB0eXBlIGluIHRoZSBjb25maWd1cmF0aW9uIG9yIGFzIGFuIGF0dHJpYnV0ZSBzdWNoIGFzICdcIiArIGVtYmVkXzEuZGVmYXVsdC50eXBlQXR0cmlidXRlICsgXCI9XFxcIlwiICsgcmVwb3J0XzEuZGVmYXVsdC5uYW1lICsgXCJcXFwiJy5cIik7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICAvLyBUT0RPOiBDb25zaWRlciByZW1vdmluZyBpbiBmYXZvciBvZiBwYXNzaW5nIHJlZmVyZW5jZSB0byBgdGhpc2AgaW4gY29uc3RydWN0b3JcclxuXHQgICAgICAgIC8vIFRoZSBnZXRHbG9iYWxBY2Nlc3NUb2tlbiBmdW5jdGlvbiBpcyBvbmx5IGhlcmUgc28gdGhhdCB0aGUgY29tcG9uZW50cyAoVGlsZSB8IFJlcG9ydCkgY2FuIGdldCB0aGUgZ2xvYmFsIGFjY2VzcyB0b2tlbiB3aXRob3V0IG5lZWRpbmcgcmVmZXJlbmNlXHJcblx0ICAgICAgICAvLyB0byB0aGUgc2VydmljZSB0aGF0IHRoZXkgYXJlIHJlZ2lzdGVyZWQgd2l0aGluIGJlY2F1ZXMgaXQgY3JlYXRlcyBjaXJjdWxhciBkZXBlbmRlbmNpZXNcclxuXHQgICAgICAgIGNvbmZpZy5nZXRHbG9iYWxBY2Nlc3NUb2tlbiA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmFjY2Vzc1Rva2VuOyB9O1xyXG5cdCAgICAgICAgaW5zdGFuY2UgPSBuZXcgQ29tcG9uZW50KGVsZW1lbnQsIGNvbmZpZyk7XHJcblx0ICAgICAgICBwb3dlckJpRWxlbWVudC5wb3dlckJpRW1iZWQgPSBpbnN0YW5jZTtcclxuXHQgICAgICAgIHRoaXMuZW1iZWRzLnB1c2goaW5zdGFuY2UpO1xyXG5cdCAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xyXG5cdCAgICB9O1xyXG5cdCAgICAvKipcclxuXHQgICAgICogQWRkcyBldmVudCBoYW5kbGVyIGZvciBET01Db250ZW50TG9hZGVkIHdoaWNoIGZpbmRzIGFsbCBlbGVtZW50cyBpbiBET00gd2l0aCBhdHRyaWJ1dGUgcG93ZXJiaS1lbWJlZC11cmxcclxuXHQgICAgICogdGhlbiBhdHRlbXB0cyB0byBpbml0aWF0ZSB0aGUgZW1iZWQgcHJvY2VzcyBiYXNlZCBvbiBkYXRhIGZyb20gb3RoZXIgcG93ZXJiaS0qIGF0dHJpYnV0ZXMuXHJcblx0ICAgICAqIChUaGlzIGlzIHVzdWFsbHkgb25seSB1c2VmdWwgZm9yIGFwcGxpY2F0aW9ucyByZW5kZXJlZCBvbiBieSB0aGUgc2VydmVyIHNpbmNlIGFsbCB0aGUgZGF0YSBuZWVkZWQgd2lsbCBiZSBhdmFpbGFibGUgYnkgdGhlIHRpbWUgdGhlIGhhbmRsZXIgaXMgY2FsbGVkLilcclxuXHQgICAgICovXHJcblx0ICAgIFBvd2VyQmkucHJvdG90eXBlLmVuYWJsZUF1dG9FbWJlZCA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcblx0ICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gX3RoaXMuaW5pdChkb2N1bWVudC5ib2R5KTsgfSwgZmFsc2UpO1xyXG5cdCAgICB9O1xyXG5cdCAgICAvKipcclxuXHQgICAgICogUmVtb3ZlIGNvbXBvbmVudCBmcm9tIHRoZSBsaXN0IG9mIGVtYmVkZGVkIGNvbXBvbmVudHMuXHJcblx0ICAgICAqL1xyXG5cdCAgICBQb3dlckJpLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoY29tcG9uZW50KSB7XHJcblx0ICAgICAgICB1dGlsXzEuZGVmYXVsdC5yZW1vdmUoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHggPT09IGNvbXBvbmVudDsgfSwgdGhpcy5lbWJlZHMpO1xyXG5cdCAgICB9O1xyXG5cdCAgICAvKipcclxuXHQgICAgICogSGFuZGxlciBmb3Igd2luZG93IG1lc3NhZ2UgZXZlbnQuXHJcblx0ICAgICAqIFBhcnNlcyBldmVudCBkYXRhIGFzIGpzb24gYW5kIGlmIGl0IGNhbWUgZnJvbSBhbiBpZnJhbWUgdGhhdCBtYXRjaGVzIG9uZSBmcm9tIGFuIGV4aXN0aW5nIGVtYmVkZWQgY29tcG9uZW50IHJlLWRpc3BhdGNoZXMgdGhlIGV2ZW50IG9uIHRoZSBpZnJhbWUncyBwYXJlbnQgZWxlbWVudFxyXG5cdCAgICAgKiB0byBzaW11bGF0ZSB0aGUgZXZlbnQgYnViYmxpbmcgdGhyb3VnaCB0aGUgdHdvIHNlcGFyYXRlIHdpbmRvd3MgLyBET01zLlxyXG5cdCAgICAgKlxyXG5cdCAgICAgKiBJZiBhbiBlcnJvciBvY2N1cnMgd2hlbiBwYXJzaW5nIGV2ZW50LmRhdGEgY2FsbCBlcnJvciBoYW5kbGVyIHByb3ZpZGVkIGR1cmluZyBjb25maWd1cmF0aW9uLlxyXG5cdCAgICAgKi9cclxuXHQgICAgUG93ZXJCaS5wcm90b3R5cGUub25SZWNlaXZlTWVzc2FnZSA9IGZ1bmN0aW9uIChldmVudCkge1xyXG5cdCAgICAgICAgaWYgKCFldmVudCkge1xyXG5cdCAgICAgICAgICAgIHJldHVybjtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIHRyeSB7XHJcblx0ICAgICAgICAgICAgLy8gT25seSByYWlzZSB0aGUgZXZlbnQgb24gdGhlIGVtYmVkIHRoYXQgbWF0Y2hlcyB0aGUgcG9zdCBtZXNzYWdlIG9yaWdpblxyXG5cdCAgICAgICAgICAgIHZhciBlbWJlZCA9IHV0aWxfMS5kZWZhdWx0LmZpbmQoZnVuY3Rpb24gKGVtYmVkKSB7IHJldHVybiBldmVudC5zb3VyY2UgPT09IGVtYmVkLmlmcmFtZS5jb250ZW50V2luZG93OyB9LCB0aGlzLmVtYmVkcyk7XHJcblx0ICAgICAgICAgICAgaWYgKGVtYmVkKSB7XHJcblx0ICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlRGF0YSA9IHR5cGVvZiBldmVudC5kYXRhID09PSAnc3RyaW5nJyA/IEpTT04ucGFyc2UoZXZlbnQuZGF0YSkgOiBldmVudC5kYXRhO1xyXG5cdCAgICAgICAgICAgICAgICB1dGlsXzEuZGVmYXVsdC5yYWlzZUN1c3RvbUV2ZW50KGVtYmVkLmVsZW1lbnQsIFBvd2VyQmkuZXZlbnRNYXBbbWVzc2FnZURhdGEuZXZlbnRdLCBtZXNzYWdlRGF0YSk7XHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgY2F0Y2ggKGUpIHtcclxuXHQgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuY29uZmlnLm9uRXJyb3IgPT09ICdmdW5jdGlvbicpIHtcclxuXHQgICAgICAgICAgICAgICAgdGhpcy5jb25maWcub25FcnJvci5jYWxsKHdpbmRvdywgZSk7XHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgICAgIGVsc2Uge1xyXG5cdCAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgIH1cclxuXHQgICAgfTtcclxuXHQgICAgLyoqXHJcblx0ICAgICAqIExpc3Qgb2YgY29tcG9uZW50cyB0aGlzIHNlcnZpY2UgY2FuIGVtYmVkLlxyXG5cdCAgICAgKi9cclxuXHQgICAgUG93ZXJCaS5jb21wb25lbnRzID0gW1xyXG5cdCAgICAgICAgdGlsZV8xLmRlZmF1bHQsXHJcblx0ICAgICAgICByZXBvcnRfMS5kZWZhdWx0XHJcblx0ICAgIF07XHJcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBNYXBwaW5nIG9mIGV2ZW50IG5hbWVzIGZyb20gaWZyYW1lIHBvc3RNZXNzYWdlIHRvIHRoZWlyIG5hbWUgcGVyY2lldmVkIGJ5IHBhcmVudCBET00uXHJcblx0ICAgICAqIEV4YW1wbGU6IFVzZXIgY2xpY2tzIG9uIGVtYmVkZWQgcmVwb3J0IHdoaWNoIGlzIGluc2lkZSBpZnJhbWUuIFRoZSBpZnJhbWUgY29kZSByZXNlbmRzXHJcblx0ICAgICAqIGV2ZW50IGFzIHBvc3RNZXNzYWdlIHdpdGggeyBldmVudDogJ3JlcG9ydENsaWNrZWQnLCAuLi4gfSBhbmQgdGhpcyBuYW1lIGlzIGNvbnZlcnRlZCB0byBoeXBoZW5hdGVkXHJcblx0ICAgICAqIG5hbWUgYW5kIGRpc3BhdGNoZWQgZnJvbSB0aGUgcGFyZW50IGVsZW1lbnQgb2YgdGhlIGlmcmFtZSB0byBzaW11bGF0ZSB0aGUgZXZlbnQgYnViYmxpbmcgdGhyb3VnaCB0d29cclxuXHQgICAgICogZGlmZmVyZW50IHdpbmRvd3MgLyBET01zXHJcblx0ICAgICAqL1xyXG5cdCAgICBQb3dlckJpLmV2ZW50TWFwID0ge1xyXG5cdCAgICAgICAgJ3RpbGVDbGlja2VkJzogJ3RpbGUtY2xpY2snLFxyXG5cdCAgICAgICAgJ3RpbGVMb2FkZWQnOiAndGlsZS1sb2FkJyxcclxuXHQgICAgICAgICdyZXBvcnRQYWdlTG9hZGVkJzogJ3JlcG9ydC1sb2FkJ1xyXG5cdCAgICB9O1xyXG5cdCAgICAvKipcclxuXHQgICAgICogRGVmYXVsdCBjb25maWd1cmF0aW9uIGZvciBzZXJ2aWNlLlxyXG5cdCAgICAgKi9cclxuXHQgICAgUG93ZXJCaS5kZWZhdWx0Q29uZmlnID0ge1xyXG5cdCAgICAgICAgYXV0b0VtYmVkT25Db250ZW50TG9hZGVkOiBmYWxzZSxcclxuXHQgICAgICAgIG9uRXJyb3I6IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG5cdCAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcblx0ICAgICAgICAgICAgICAgIGFyZ3NbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgICAgIHJldHVybiBjb25zb2xlLmxvZyhhcmdzWzBdLCBhcmdzLnNsaWNlKDEpKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgfTtcclxuXHQgICAgcmV0dXJuIFBvd2VyQmk7XHJcblx0fSgpKTtcclxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcblx0ZXhwb3J0cy5kZWZhdWx0ID0gUG93ZXJCaTtcclxuXG5cbi8qKiovIH0sXG4vKiAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHR2YXIgdXRpbF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcclxuXHR2YXIgRW1iZWQgPSAoZnVuY3Rpb24gKCkge1xyXG5cdCAgICBmdW5jdGlvbiBFbWJlZChlbGVtZW50LCBvcHRpb25zKSB7XHJcblx0ICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xyXG5cdCAgICAgICAgLy8gVE9ETzogQ2hhbmdlIHdoZW4gT2JqZWN0LmFzc2lnbiBpcyBhdmFpbGFibGUuXHJcblx0ICAgICAgICB0aGlzLm9wdGlvbnMgPSB1dGlsXzEuZGVmYXVsdC5hc3NpZ24oe30sIEVtYmVkLmRlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcclxuXHQgICAgICAgIHRoaXMub3B0aW9ucy5hY2Nlc3NUb2tlbiA9IHRoaXMuZ2V0QWNjZXNzVG9rZW4oKTtcclxuXHQgICAgICAgIHZhciBlbWJlZFVybCA9IHRoaXMuZ2V0RW1iZWRVcmwoKTtcclxuXHQgICAgICAgIHZhciBpZnJhbWVIdG1sID0gXCI8aWZyYW1lIHN0eWxlPVxcXCJ3aWR0aDoxMDAlO2hlaWdodDoxMDAlO1xcXCIgc3JjPVxcXCJcIiArIGVtYmVkVXJsICsgXCJcXFwiIHNjcm9sbGluZz1cXFwibm9cXFwiIGFsbG93ZnVsbHNjcmVlbj1cXFwidHJ1ZVxcXCI+PC9pZnJhbWU+XCI7XHJcblx0ICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gaWZyYW1lSHRtbDtcclxuXHQgICAgICAgIHRoaXMuaWZyYW1lID0gdGhpcy5lbGVtZW50LmNoaWxkTm9kZXNbMF07XHJcblx0ICAgICAgICB0aGlzLmlmcmFtZS5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgdGhpcy5sb2FkLmJpbmQodGhpcyksIGZhbHNlKTtcclxuXHQgICAgfVxyXG5cdCAgICAvKipcclxuXHQgICAgICogSGFuZGxlciBmb3Igd2hlbiB0aGUgaWZyYW1lIGhhcyBmaW5pc2hlZCBsb2FkaW5nIHRoZSBwb3dlcmJpIHBsYWNlaG9sZGVyIHBhZ2UuXHJcblx0ICAgICAqIFRoaXMgaXMgdXNlZCB0byBpbmplY3QgY29uZmlndXJhdGlvbiBvcHRpb25zIHN1Y2ggYXMgYWNjZXNzIHRva2VuLCBsb2FkQWN0aW9uLCBldGNcclxuXHQgICAgICogd2hpY2ggYWxsb3cgaWZyYW1lIHRvIGxvYWQgdGhlIGFjdHVhbCByZXBvcnQgd2l0aCBhdXRoZW50aWNhdGlvbi5cclxuXHQgICAgICovXHJcblx0ICAgIEVtYmVkLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgdmFyIGNvbXB1dGVkU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsZW1lbnQpO1xyXG5cdCAgICAgICAgdmFyIGluaXRFdmVudEFyZ3MgPSB7XHJcblx0ICAgICAgICAgICAgbWVzc2FnZToge1xyXG5cdCAgICAgICAgICAgICAgICBhY3Rpb246IHRoaXMub3B0aW9ucy5sb2FkQWN0aW9uLFxyXG5cdCAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbjogdGhpcy5vcHRpb25zLmFjY2Vzc1Rva2VuLFxyXG5cdCAgICAgICAgICAgICAgICB3aWR0aDogY29tcHV0ZWRTdHlsZS53aWR0aCxcclxuXHQgICAgICAgICAgICAgICAgaGVpZ2h0OiBjb21wdXRlZFN0eWxlLmhlaWdodFxyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgIH07XHJcblx0ICAgICAgICB1dGlsXzEuZGVmYXVsdC5yYWlzZUN1c3RvbUV2ZW50KHRoaXMuZWxlbWVudCwgJ2VtYmVkLWluaXQnLCBpbml0RXZlbnRBcmdzKTtcclxuXHQgICAgICAgIHRoaXMuaWZyYW1lLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UoSlNPTi5zdHJpbmdpZnkoaW5pdEV2ZW50QXJncy5tZXNzYWdlKSwgJyonKTtcclxuXHQgICAgfTtcclxuXHQgICAgLyoqXHJcblx0ICAgICAqIEdldCBhY2Nlc3MgdG9rZW4gZnJvbSBmaXJzdCBhdmFpbGFibGUgbG9jYXRpb246IG9wdGlvbnMsIGF0dHJpYnV0ZSwgZ2xvYmFsLlxyXG5cdCAgICAgKi9cclxuXHQgICAgRW1iZWQucHJvdG90eXBlLmdldEFjY2Vzc1Rva2VuID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgdmFyIGFjY2Vzc1Rva2VuID0gdGhpcy5vcHRpb25zLmFjY2Vzc1Rva2VuIHx8IHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoRW1iZWQuYWNjZXNzVG9rZW5BdHRyaWJ1dGUpIHx8IHRoaXMub3B0aW9ucy5nZXRHbG9iYWxBY2Nlc3NUb2tlbigpO1xyXG5cdCAgICAgICAgaWYgKCFhY2Nlc3NUb2tlbikge1xyXG5cdCAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGFjY2VzcyB0b2tlbiB3YXMgZm91bmQgZm9yIGVsZW1lbnQuIFlvdSBtdXN0IHNwZWNpZnkgYW4gYWNjZXNzIHRva2VuIGRpcmVjdGx5IG9uIHRoZSBlbGVtZW50IHVzaW5nIGF0dHJpYnV0ZSAnXCIgKyBFbWJlZC5hY2Nlc3NUb2tlbkF0dHJpYnV0ZSArIFwiJyBvciBzcGVjaWZ5IGEgZ2xvYmFsIHRva2VuIGF0OiBwb3dlcmJpLmFjY2Vzc1Rva2VuLlwiKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIHJldHVybiBhY2Nlc3NUb2tlbjtcclxuXHQgICAgfTtcclxuXHQgICAgLyoqXHJcblx0ICAgICAqIEdldCBlbWJlZCB1cmwgZnJvbSBmaXJzdCBhdmFpbGFibGUgbG9jYXRpb246IG9wdGlvbnMsIGF0dHJpYnV0ZS5cclxuXHQgICAgICovXHJcblx0ICAgIEVtYmVkLnByb3RvdHlwZS5nZXRFbWJlZFVybCA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHZhciBlbWJlZFVybCA9IHRoaXMub3B0aW9ucy5lbWJlZFVybCB8fCB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKEVtYmVkLmVtYmVkVXJsQXR0cmlidXRlKTtcclxuXHQgICAgICAgIGlmICh0eXBlb2YgZW1iZWRVcmwgIT09ICdzdHJpbmcnIHx8IGVtYmVkVXJsLmxlbmd0aCA9PT0gMCkge1xyXG5cdCAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkVtYmVkIFVybCBpcyByZXF1aXJlZCwgYnV0IGl0IHdhcyBub3QgZm91bmQuIFlvdSBtdXN0IHByb3ZpZGUgYW4gZW1iZWQgdXJsIGVpdGhlciBhcyBwYXJ0IG9mIGVtYmVkIGNvbmZpZ3VyYXRpb24gb3IgYXMgYXR0cmlidXRlICdcIiArIEVtYmVkLmVtYmVkVXJsQXR0cmlidXRlICsgXCInLlwiKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIHJldHVybiBlbWJlZFVybDtcclxuXHQgICAgfTtcclxuXHQgICAgLyoqXHJcblx0ICAgICAqIFJlcXVlc3QgdGhlIGJyb3dzZXIgdG8gbWFrZSB0aGUgY29tcG9uZW50cyBpZnJhbWUgZnVsbHNjcmVlbi5cclxuXHQgICAgICovXHJcblx0ICAgIEVtYmVkLnByb3RvdHlwZS5mdWxsc2NyZWVuID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgdmFyIHJlcXVlc3RGdWxsU2NyZWVuID0gdGhpcy5pZnJhbWUucmVxdWVzdEZ1bGxzY3JlZW4gfHwgdGhpcy5pZnJhbWUubXNSZXF1ZXN0RnVsbHNjcmVlbiB8fCB0aGlzLmlmcmFtZS5tb3pSZXF1ZXN0RnVsbFNjcmVlbiB8fCB0aGlzLmlmcmFtZS53ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbjtcclxuXHQgICAgICAgIHJlcXVlc3RGdWxsU2NyZWVuLmNhbGwodGhpcy5pZnJhbWUpO1xyXG5cdCAgICB9O1xyXG5cdCAgICAvKipcclxuXHQgICAgICogRXhpdCBmdWxsc2NyZWVuLlxyXG5cdCAgICAgKi9cclxuXHQgICAgRW1iZWQucHJvdG90eXBlLmV4aXRGdWxsc2NyZWVuID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgaWYgKCF0aGlzLmlzRnVsbHNjcmVlbih0aGlzLmlmcmFtZSkpIHtcclxuXHQgICAgICAgICAgICByZXR1cm47XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICB2YXIgZXhpdEZ1bGxzY3JlZW4gPSBkb2N1bWVudC5leGl0RnVsbHNjcmVlbiB8fCBkb2N1bWVudC5tb3pDYW5jZWxGdWxsU2NyZWVuIHx8IGRvY3VtZW50LndlYmtpdEV4aXRGdWxsc2NyZWVuIHx8IGRvY3VtZW50Lm1zRXhpdEZ1bGxzY3JlZW47XHJcblx0ICAgICAgICBleGl0RnVsbHNjcmVlbi5jYWxsKGRvY3VtZW50KTtcclxuXHQgICAgfTtcclxuXHQgICAgLyoqXHJcblx0ICAgICAqIFJldHVybiB0cnVlIGlmIGlmcmFtZSBpcyBmdWxsc2NyZWVuLFxyXG5cdCAgICAgKiBvdGhlcndpc2UgcmV0dXJuIGZhbHNlXHJcblx0ICAgICAqL1xyXG5cdCAgICBFbWJlZC5wcm90b3R5cGUuaXNGdWxsc2NyZWVuID0gZnVuY3Rpb24gKGlmcmFtZSkge1xyXG5cdCAgICAgICAgdmFyIG9wdGlvbnMgPSBbJ2Z1bGxzY3JlZW5FbGVtZW50JywgJ3dlYmtpdEZ1bGxzY3JlZW5FbGVtZW50JywgJ21vekZ1bGxzY3JlZW5TY3JlZW5FbGVtZW50JywgJ21zRnVsbHNjcmVlbkVsZW1lbnQnXTtcclxuXHQgICAgICAgIHJldHVybiBvcHRpb25zLnNvbWUoZnVuY3Rpb24gKG9wdGlvbikgeyByZXR1cm4gZG9jdW1lbnRbb3B0aW9uXSA9PT0gaWZyYW1lOyB9KTtcclxuXHQgICAgfTtcclxuXHQgICAgRW1iZWQuZW1iZWRVcmxBdHRyaWJ1dGUgPSAncG93ZXJiaS1lbWJlZC11cmwnO1xyXG5cdCAgICBFbWJlZC5hY2Nlc3NUb2tlbkF0dHJpYnV0ZSA9ICdwb3dlcmJpLWFjY2Vzcy10b2tlbic7XHJcblx0ICAgIEVtYmVkLnR5cGVBdHRyaWJ1dGUgPSAncG93ZXJiaS10eXBlJztcclxuXHQgICAgLyoqXHJcblx0ICAgICAqIERlZmF1bHQgb3B0aW9ucyBmb3IgZW1iZWRkYWJsZSBjb21wb25lbnQuXHJcblx0ICAgICAqL1xyXG5cdCAgICBFbWJlZC5kZWZhdWx0T3B0aW9ucyA9IHtcclxuXHQgICAgICAgIGZpbHRlclBhbmVFbmFibGVkOiB0cnVlLFxyXG5cdCAgICAgICAgb3ZlcndyaXRlOiB0cnVlXHJcblx0ICAgIH07XHJcblx0ICAgIHJldHVybiBFbWJlZDtcclxuXHR9KCkpO1xyXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuXHRleHBvcnRzLmRlZmF1bHQgPSBFbWJlZDtcclxuXG5cbi8qKiovIH0sXG4vKiAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHR2YXIgVXRpbHMgPSAoZnVuY3Rpb24gKCkge1xyXG5cdCAgICBmdW5jdGlvbiBVdGlscygpIHtcclxuXHQgICAgfVxyXG5cdCAgICBVdGlscy5yYWlzZUN1c3RvbUV2ZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQsIGV2ZW50TmFtZSwgZXZlbnREYXRhKSB7XHJcblx0ICAgICAgICB2YXIgY3VzdG9tRXZlbnQ7XHJcblx0ICAgICAgICBpZiAodHlwZW9mIHdpbmRvdy5DdXN0b21FdmVudCA9PT0gJ2Z1bmN0aW9uJykge1xyXG5cdCAgICAgICAgICAgIGN1c3RvbUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KGV2ZW50TmFtZSwge1xyXG5cdCAgICAgICAgICAgICAgICBkZXRhaWw6IGV2ZW50RGF0YSxcclxuXHQgICAgICAgICAgICAgICAgYnViYmxlczogdHJ1ZSxcclxuXHQgICAgICAgICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxyXG5cdCAgICAgICAgICAgIH0pO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgZWxzZSB7XHJcblx0ICAgICAgICAgICAgY3VzdG9tRXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnQ3VzdG9tRXZlbnQnKTtcclxuXHQgICAgICAgICAgICBjdXN0b21FdmVudC5pbml0Q3VzdG9tRXZlbnQoZXZlbnROYW1lLCB0cnVlLCB0cnVlLCBldmVudERhdGEpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgZWxlbWVudC5kaXNwYXRjaEV2ZW50KGN1c3RvbUV2ZW50KTtcclxuXHQgICAgICAgIGlmIChjdXN0b21FdmVudC5kZWZhdWx0UHJldmVudGVkIHx8ICFjdXN0b21FdmVudC5yZXR1cm5WYWx1ZSkge1xyXG5cdCAgICAgICAgICAgIHJldHVybjtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIHZhciBpbmxpbmVFdmVudEF0dHIgPSAnb24nICsgZXZlbnROYW1lLnJlcGxhY2UoJy0nLCAnJyk7XHJcblx0ICAgICAgICB2YXIgaW5saW5lU2NyaXB0ID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoaW5saW5lRXZlbnRBdHRyKTtcclxuXHQgICAgICAgIGlmIChpbmxpbmVTY3JpcHQpIHtcclxuXHQgICAgICAgICAgICBldmFsLmNhbGwoZWxlbWVudCwgaW5saW5lU2NyaXB0KTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgfTtcclxuXHQgICAgVXRpbHMuZmluZEluZGV4ID0gZnVuY3Rpb24gKHByZWRpY2F0ZSwgeHMpIHtcclxuXHQgICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh4cykpIHtcclxuXHQgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJZb3UgYXR0ZW1wdGVkIHRvIGNhbGwgZmluZCB3aXRoIHNlY29uZCBwYXJhbWV0ZXIgdGhhdCB3YXMgbm90IGFuIGFycmF5LiBZb3UgcGFzc2VkOiBcIiArIHhzKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIHZhciBpbmRleDtcclxuXHQgICAgICAgIHhzLnNvbWUoZnVuY3Rpb24gKHgsIGkpIHtcclxuXHQgICAgICAgICAgICBpZiAocHJlZGljYXRlKHgpKSB7XHJcblx0ICAgICAgICAgICAgICAgIGluZGV4ID0gaTtcclxuXHQgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgfSk7XHJcblx0ICAgICAgICByZXR1cm4gaW5kZXg7XHJcblx0ICAgIH07XHJcblx0ICAgIFV0aWxzLmZpbmQgPSBmdW5jdGlvbiAocHJlZGljYXRlLCB4cykge1xyXG5cdCAgICAgICAgdmFyIGluZGV4ID0gVXRpbHMuZmluZEluZGV4KHByZWRpY2F0ZSwgeHMpO1xyXG5cdCAgICAgICAgcmV0dXJuIHhzW2luZGV4XTtcclxuXHQgICAgfTtcclxuXHQgICAgVXRpbHMucmVtb3ZlID0gZnVuY3Rpb24gKHByZWRpY2F0ZSwgeHMpIHtcclxuXHQgICAgICAgIHZhciBpbmRleCA9IFV0aWxzLmZpbmRJbmRleChwcmVkaWNhdGUsIHhzKTtcclxuXHQgICAgICAgIHhzLnNwbGljZShpbmRleCwgMSk7XHJcblx0ICAgIH07XHJcblx0ICAgIC8vIFNlZTogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2Fzc2lnblxyXG5cdCAgICAvLyBUT0RPOiByZXBsYWNlIGluIGZhdm9yIG9mIHVzaW5nIHBvbHlmaWxsXHJcblx0ICAgIFV0aWxzLmFzc2lnbiA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHZhciBhcmdzID0gW107XHJcblx0ICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG5cdCAgICAgICAgICAgIGFyZ3NbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICB2YXIgdGFyZ2V0ID0gYXJnc1swXTtcclxuXHQgICAgICAgICd1c2Ugc3RyaWN0JztcclxuXHQgICAgICAgIGlmICh0YXJnZXQgPT09IHVuZGVmaW5lZCB8fCB0YXJnZXQgPT09IG51bGwpIHtcclxuXHQgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY29udmVydCB1bmRlZmluZWQgb3IgbnVsbCB0byBvYmplY3QnKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIHZhciBvdXRwdXQgPSBPYmplY3QodGFyZ2V0KTtcclxuXHQgICAgICAgIGZvciAodmFyIGluZGV4ID0gMTsgaW5kZXggPCBhcmd1bWVudHMubGVuZ3RoOyBpbmRleCsrKSB7XHJcblx0ICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpbmRleF07XHJcblx0ICAgICAgICAgICAgaWYgKHNvdXJjZSAhPT0gdW5kZWZpbmVkICYmIHNvdXJjZSAhPT0gbnVsbCkge1xyXG5cdCAgICAgICAgICAgICAgICBmb3IgKHZhciBuZXh0S2V5IGluIHNvdXJjZSkge1xyXG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShuZXh0S2V5KSkge1xyXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFtuZXh0S2V5XSA9IHNvdXJjZVtuZXh0S2V5XTtcclxuXHQgICAgICAgICAgICAgICAgICAgIH1cclxuXHQgICAgICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIHJldHVybiBvdXRwdXQ7XHJcblx0ICAgIH07XHJcblx0ICAgIHJldHVybiBVdGlscztcclxuXHR9KCkpO1xyXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuXHRleHBvcnRzLmRlZmF1bHQgPSBVdGlscztcclxuXG5cbi8qKiovIH0sXG4vKiA0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XHJcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xyXG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG5cdH07XHJcblx0dmFyIGVtYmVkXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xyXG5cdHZhciBSZXBvcnQgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG5cdCAgICBfX2V4dGVuZHMoUmVwb3J0LCBfc3VwZXIpO1xyXG5cdCAgICBmdW5jdGlvbiBSZXBvcnQoZWxlbWVudCwgb3B0aW9ucykge1xyXG5cdCAgICAgICAgLyoqIEZvcmNlIGxvYWRBY3Rpb24gb24gb3B0aW9ucyB0byBtYXRjaCB0aGUgdHlwZSBvZiBjb21wb25lbnQuIFRoaXMgaXMgcmVxdWlyZWQgdG8gYm9vdHN0cmFwIGlmcmFtZS4gKi9cclxuXHQgICAgICAgIG9wdGlvbnMubG9hZEFjdGlvbiA9ICdsb2FkUmVwb3J0JztcclxuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGVsZW1lbnQsIG9wdGlvbnMpO1xyXG5cdCAgICB9XHJcblx0ICAgIFJlcG9ydC5wcm90b3R5cGUuZ2V0RW1iZWRVcmwgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICB2YXIgZW1iZWRVcmwgPSBfc3VwZXIucHJvdG90eXBlLmdldEVtYmVkVXJsLmNhbGwodGhpcyk7XHJcblx0ICAgICAgICAvLyBUT0RPOiBOZWVkIHNhZmUgd2F5IHRvIGFkZCB1cmwgcGFyYW1ldGVycy5cclxuXHQgICAgICAgIC8vIFdlIGFyZSBhc3N1bWluZyBlbWJlZFVybHMgdXNlIHF1ZXJ5IHBhcmFtZXRlcnMgdG8gc3VwcGx5IGlkIG9mIHZpc3VhbFxyXG5cdCAgICAgICAgLy8gc28gbXVzdCBwcmVmaXggd2l0aCAnJicuXHJcblx0ICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5maWx0ZXJQYW5lRW5hYmxlZCkge1xyXG5cdCAgICAgICAgICAgIGVtYmVkVXJsICs9IFwiJmZpbHRlclBhbmVFbmFibGVkPWZhbHNlXCI7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICByZXR1cm4gZW1iZWRVcmw7XHJcblx0ICAgIH07XHJcblx0ICAgIFJlcG9ydC50eXBlID0gJ3JlcG9ydCc7XHJcblx0ICAgIHJldHVybiBSZXBvcnQ7XHJcblx0fShlbWJlZF8xLmRlZmF1bHQpKTtcclxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcblx0ZXhwb3J0cy5kZWZhdWx0ID0gUmVwb3J0O1xyXG5cblxuLyoqKi8gfSxcbi8qIDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcclxuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XHJcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcblx0fTtcclxuXHR2YXIgZW1iZWRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XHJcblx0dmFyIFRpbGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG5cdCAgICBfX2V4dGVuZHMoVGlsZSwgX3N1cGVyKTtcclxuXHQgICAgZnVuY3Rpb24gVGlsZShlbGVtZW50LCBvcHRpb25zKSB7XHJcblx0ICAgICAgICAvKiogRm9yY2UgbG9hZEFjdGlvbiBvbiBvcHRpb25zIHRvIG1hdGNoIHRoZSB0eXBlIG9mIGNvbXBvbmVudC4gVGhpcyBpcyByZXF1aXJlZCB0byBib290c3RyYXAgaWZyYW1lLiAqL1xyXG5cdCAgICAgICAgb3B0aW9ucy5sb2FkQWN0aW9uID0gJ2xvYWRUaWxlJztcclxuXHQgICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGVsZW1lbnQsIG9wdGlvbnMpO1xyXG5cdCAgICB9XHJcblx0ICAgIFRpbGUucHJvdG90eXBlLmdldEVtYmVkVXJsID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgdmFyIGVtYmVkVXJsID0gX3N1cGVyLnByb3RvdHlwZS5nZXRFbWJlZFVybC5jYWxsKHRoaXMpO1xyXG5cdCAgICAgICAgcmV0dXJuIGVtYmVkVXJsO1xyXG5cdCAgICB9O1xyXG5cdCAgICBUaWxlLnR5cGUgPSAndGlsZSc7XHJcblx0ICAgIHJldHVybiBUaWxlO1xyXG5cdH0oZW1iZWRfMS5kZWZhdWx0KSk7XHJcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5cdGV4cG9ydHMuZGVmYXVsdCA9IFRpbGU7XHJcblxuXG4vKioqLyB9XG4vKioqKioqLyBdKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBvd2VyYmkuanMubWFwIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
