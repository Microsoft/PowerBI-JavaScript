!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var o=n(1);window.Powerbi=o["default"],window.powerbi=new o["default"]},function(e,t,n){"use strict";var o=n(2),r=n(4),i=n(5),s=n(3),a=function(){function e(t){void 0===t&&(t={}),this.embeds=[],window.addEventListener("message",this.onReceiveMessage.bind(this),!1),this.config=s["default"].assign({},e.defaultConfig,t),this.config.autoEmbedOnContentLoaded&&this.enableAutoEmbed()}return e.prototype.init=function(e){var t=this;e=e&&e instanceof HTMLElement?e:document.body;var n=Array.prototype.slice.call(e.querySelectorAll("["+o["default"].embedUrlAttribute+"]"));n.forEach(function(e){return t.embed(e)})},e.prototype.embed=function(t,n){var i=this;void 0===n&&(n={});var a,u=t;if(u.powerBiEmbed&&!n.overwrite)return a=u.powerBiEmbed;u.powerBiEmbed&&n.overwrite&&this.remove(u.powerBiEmbed);var c=n.type||t.getAttribute(o["default"].typeAttribute);if(!c)throw new Error("Attempted to embed using config "+JSON.stringify(n)+" on element "+t.outerHTML+", but could not determine what type of component to embed. You must specify a type in the configuration or as an attribute such as '"+o["default"].typeAttribute+'="'+r["default"].name.toLowerCase()+"\"'.");var l=s["default"].find(function(e){return c===e.name.toLowerCase()},e.components);if(!l)throw new Error("Attempted to embed component of type: "+c+" but did not find any matching component.  Please verify the type you specified is intended.");return n.getGlobalAccessToken=function(){return i.accessToken},a=new l(t,n),u.powerBiEmbed=a,this.embeds.push(a),a},e.prototype.enableAutoEmbed=function(){var e=this;window.addEventListener("DOMContentLoaded",function(t){return e.init(document.body)},!1)},e.prototype.get=function(e){var t=e;if(!t.powerBiEmbed)throw new Error("You attempted to get an instance of powerbi component associated with element: "+e.outerHTML+" but there was no associated instance.");return t.powerBiEmbed},e.prototype.remove=function(e){s["default"].remove(function(t){return t===e},this.embeds)},e.prototype.onReceiveMessage=function(t){if(t)try{var n=s["default"].find(function(e){return t.source===e.iframe.contentWindow},this.embeds);if(n){var o="string"==typeof t.data?JSON.parse(t.data):t.data;s["default"].raiseCustomEvent(n.element,e.eventMap[o.event],o)}}catch(r){if("function"!=typeof this.config.onError)throw r;this.config.onError.call(window,r)}},e.components=[i["default"],r["default"]],e.eventMap={tileClicked:"tile-click",tileLoaded:"tile-load",reportPageLoaded:"report-load"},e.defaultConfig={autoEmbedOnContentLoaded:!1,onError:function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return console.log(e[0],e.slice(1))}},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a},function(e,t,n){"use strict";var o=n(3),r=function(){function e(t,n){this.element=t,this.options=o["default"].assign({},e.defaultOptions,n),this.options.accessToken=this.getAccessToken(),this.options.embedUrl=this.getEmbedUrl();var r='<iframe style="width:100%;height:100%;" src="'+this.options.embedUrl+'" scrolling="no" allowfullscreen="true"></iframe>';this.element.innerHTML=r,this.iframe=this.element.childNodes[0],this.iframe.addEventListener("load",this.load.bind(this),!1)}return e.prototype.load=function(){var e=window.getComputedStyle(this.element),t={message:{action:this.options.loadAction,accessToken:this.options.accessToken,width:e.width,height:e.height}};o["default"].raiseCustomEvent(this.element,"embed-init",t),this.iframe.contentWindow.postMessage(JSON.stringify(t.message),"*")},e.prototype.getAccessToken=function(){var t=this.options.accessToken||this.element.getAttribute(e.accessTokenAttribute)||this.options.getGlobalAccessToken();if(!t)throw new Error("No access token was found for element. You must specify an access token directly on the element using attribute '"+e.accessTokenAttribute+"' or specify a global token at: powerbi.accessToken.");return t},e.prototype.getEmbedUrl=function(){var t=this.options.embedUrl||this.element.getAttribute(e.embedUrlAttribute);if("string"!=typeof t||0===t.length)throw new Error("Embed Url is required, but it was not found. You must provide an embed url either as part of embed configuration or as attribute '"+e.embedUrlAttribute+"'.");return t},e.prototype.fullscreen=function(){var e=this.iframe.requestFullscreen||this.iframe.msRequestFullscreen||this.iframe.mozRequestFullScreen||this.iframe.webkitRequestFullscreen;e.call(this.iframe)},e.prototype.exitFullscreen=function(){if(this.isFullscreen(this.iframe)){var e=document.exitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.msExitFullscreen;e.call(document)}},e.prototype.isFullscreen=function(e){var t=["fullscreenElement","webkitFullscreenElement","mozFullscreenScreenElement","msFullscreenElement"];return t.some(function(t){return document[t]===e})},e.embedUrlAttribute="powerbi-embed-url",e.accessTokenAttribute="powerbi-access-token",e.typeAttribute="powerbi-type",e.defaultOptions={filterPaneEnabled:!0,overwrite:!0},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r},function(e,t){"use strict";var n=function(){function e(){}return e.raiseCustomEvent=function(e,t,n){var o;if("function"==typeof window.CustomEvent?o=new CustomEvent(t,{detail:n,bubbles:!0,cancelable:!0}):(o=document.createEvent("CustomEvent"),o.initCustomEvent(t,!0,!0,n)),e.dispatchEvent(o),!o.defaultPrevented&&o.returnValue){var r="on"+t.replace("-",""),i=e.getAttribute(r);i&&eval.call(e,i)}},e.findIndex=function(e,t){if(!Array.isArray(t))throw new Error("You attempted to call find with second parameter that was not an array. You passed: "+t);var n;return t.some(function(t,o){return e(t)?(n=o,!0):void 0}),n},e.find=function(t,n){var o=e.findIndex(t,n);return n[o]},e.remove=function(t,n){var o=e.findIndex(t,n);n.splice(o,1)},e.assign=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=e[0];if(void 0===n||null===n)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(n),r=1;r<arguments.length;r++){var i=arguments[r];if(void 0!==i&&null!==i)for(var s in i)i.hasOwnProperty(s)&&(o[s]=i[s])}return o},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},function(e,t,n){"use strict";var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=n(2),i=function(e){function t(t,n){n.loadAction="loadReport",e.call(this,t,n)}return o(t,e),t.prototype.getEmbedUrl=function(){var t=e.prototype.getEmbedUrl.call(this);return this.options.filterPaneEnabled||(t+="&filterPaneEnabled=false"),t},t}(r["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i},function(e,t,n){"use strict";var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=n(2),i=function(e){function t(t,n){n.loadAction="loadTile",e.call(this,t,n)}return o(t,e),t.prototype.getEmbedUrl=function(){var t=e.prototype.getEmbedUrl.call(this);return t},t}(r["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvd2VyYmkuanMiXSwibmFtZXMiOlsibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwibSIsImMiLCJwIiwiY29yZV8xIiwid2luZG93IiwiUG93ZXJiaSIsInBvd2VyYmkiLCJlbWJlZF8xIiwicmVwb3J0XzEiLCJ0aWxlXzEiLCJ1dGlsXzEiLCJQb3dlckJpIiwiY29uZmlnIiwidGhpcyIsImVtYmVkcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJvblJlY2VpdmVNZXNzYWdlIiwiYmluZCIsImFzc2lnbiIsImRlZmF1bHRDb25maWciLCJhdXRvRW1iZWRPbkNvbnRlbnRMb2FkZWQiLCJlbmFibGVBdXRvRW1iZWQiLCJwcm90b3R5cGUiLCJpbml0IiwiY29udGFpbmVyIiwiX3RoaXMiLCJIVE1MRWxlbWVudCIsImRvY3VtZW50IiwiYm9keSIsImVsZW1lbnRzIiwiQXJyYXkiLCJzbGljZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJlbWJlZFVybEF0dHJpYnV0ZSIsImZvckVhY2giLCJlbGVtZW50IiwiZW1iZWQiLCJpbnN0YW5jZSIsInBvd2VyQmlFbGVtZW50IiwicG93ZXJCaUVtYmVkIiwib3ZlcndyaXRlIiwicmVtb3ZlIiwiY29tcG9uZW50VHlwZSIsInR5cGUiLCJnZXRBdHRyaWJ1dGUiLCJ0eXBlQXR0cmlidXRlIiwiRXJyb3IiLCJKU09OIiwic3RyaW5naWZ5Iiwib3V0ZXJIVE1MIiwibmFtZSIsInRvTG93ZXJDYXNlIiwiQ29tcG9uZW50IiwiZmluZCIsImNvbXBvbmVudCIsImNvbXBvbmVudHMiLCJnZXRHbG9iYWxBY2Nlc3NUb2tlbiIsImFjY2Vzc1Rva2VuIiwicHVzaCIsImV2ZW50IiwiZ2V0IiwieCIsInNvdXJjZSIsImlmcmFtZSIsImNvbnRlbnRXaW5kb3ciLCJtZXNzYWdlRGF0YSIsImRhdGEiLCJwYXJzZSIsInJhaXNlQ3VzdG9tRXZlbnQiLCJldmVudE1hcCIsImUiLCJvbkVycm9yIiwidGlsZUNsaWNrZWQiLCJ0aWxlTG9hZGVkIiwicmVwb3J0UGFnZUxvYWRlZCIsImFyZ3MiLCJfaSIsImFyZ3VtZW50cyIsImxlbmd0aCIsImNvbnNvbGUiLCJsb2ciLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiRW1iZWQiLCJvcHRpb25zIiwiZGVmYXVsdE9wdGlvbnMiLCJnZXRBY2Nlc3NUb2tlbiIsImVtYmVkVXJsIiwiZ2V0RW1iZWRVcmwiLCJpZnJhbWVIdG1sIiwiaW5uZXJIVE1MIiwiY2hpbGROb2RlcyIsImxvYWQiLCJjb21wdXRlZFN0eWxlIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImluaXRFdmVudEFyZ3MiLCJtZXNzYWdlIiwiYWN0aW9uIiwibG9hZEFjdGlvbiIsIndpZHRoIiwiaGVpZ2h0IiwicG9zdE1lc3NhZ2UiLCJhY2Nlc3NUb2tlbkF0dHJpYnV0ZSIsImZ1bGxzY3JlZW4iLCJyZXF1ZXN0RnVsbFNjcmVlbiIsInJlcXVlc3RGdWxsc2NyZWVuIiwibXNSZXF1ZXN0RnVsbHNjcmVlbiIsIm1velJlcXVlc3RGdWxsU2NyZWVuIiwid2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4iLCJleGl0RnVsbHNjcmVlbiIsImlzRnVsbHNjcmVlbiIsIm1vekNhbmNlbEZ1bGxTY3JlZW4iLCJ3ZWJraXRFeGl0RnVsbHNjcmVlbiIsIm1zRXhpdEZ1bGxzY3JlZW4iLCJzb21lIiwib3B0aW9uIiwiZmlsdGVyUGFuZUVuYWJsZWQiLCJVdGlscyIsImV2ZW50TmFtZSIsImV2ZW50RGF0YSIsImN1c3RvbUV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJkZXRhaWwiLCJidWJibGVzIiwiY2FuY2VsYWJsZSIsImNyZWF0ZUV2ZW50IiwiaW5pdEN1c3RvbUV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsImRlZmF1bHRQcmV2ZW50ZWQiLCJyZXR1cm5WYWx1ZSIsImlubGluZUV2ZW50QXR0ciIsInJlcGxhY2UiLCJpbmxpbmVTY3JpcHQiLCJldmFsIiwiZmluZEluZGV4IiwicHJlZGljYXRlIiwieHMiLCJpc0FycmF5IiwiaW5kZXgiLCJpIiwic3BsaWNlIiwidGFyZ2V0IiwidW5kZWZpbmVkIiwiVHlwZUVycm9yIiwib3V0cHV0IiwibmV4dEtleSIsImhhc093blByb3BlcnR5IiwiX19leHRlbmRzIiwiZCIsImIiLCJfXyIsImNvbnN0cnVjdG9yIiwiY3JlYXRlIiwiUmVwb3J0IiwiX3N1cGVyIiwiVGlsZSJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsR0FLVCxRQUFTQyxHQUFvQkMsR0FHNUIsR0FBR0MsRUFBaUJELEdBQ25CLE1BQU9DLEdBQWlCRCxHQUFVRSxPQUduQyxJQUFJQyxHQUFTRixFQUFpQkQsSUFDN0JFLFdBQ0FFLEdBQUlKLEVBQ0pLLFFBQVEsRUFVVCxPQU5BUCxHQUFRRSxHQUFVTSxLQUFLSCxFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTSCxHQUcvREksRUFBT0UsUUFBUyxFQUdURixFQUFPRCxRQXZCZixHQUFJRCxLQXFDSixPQVRBRixHQUFvQlEsRUFBSVQsRUFHeEJDLEVBQW9CUyxFQUFJUCxFQUd4QkYsRUFBb0JVLEVBQUksR0FHakJWLEVBQW9CLEtBSy9CLFNBQVNJLEVBQVFELEVBQVNILEdBRS9CLFlBQ0EsSUFBSVcsR0FBU1gsRUFBb0IsRUFNakNZLFFBQU9DLFFBQVVGLEVBQUFBLFdBQ2pCQyxPQUFPRSxRQUFVLEdBQUlILEdBQUFBLFlBS2hCLFNBQVNQLEVBQVFELEVBQVNILEdBRS9CLFlBQ0EsSUFBSWUsR0FBVWYsRUFBb0IsR0FDOUJnQixFQUFXaEIsRUFBb0IsR0FDL0JpQixFQUFTakIsRUFBb0IsR0FDN0JrQixFQUFTbEIsRUFBb0IsR0FDN0JtQixFQUFXLFdBQ1gsUUFBU0EsR0FBUUMsR0FDRSxTQUFYQSxJQUFxQkEsTUFDekJDLEtBQUtDLFVBQ0xWLE9BQU9XLGlCQUFpQixVQUFXRixLQUFLRyxpQkFBaUJDLEtBQUtKLE9BQU8sR0FFckVBLEtBQUtELE9BQVNGLEVBQUFBLFdBQWVRLFVB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VUFBVW1FLFlBQWMsV0FDM0IsR0FBSUQsR0FBV21FLEVBQU9ySSxVQUFVbUUsWUFBWTFGLEtBQUtjLEtBT2pELE9BSEtBLE1BQUt3RSxRQUFRZ0Msb0JBQ2Q3QixHQUFZLDRCQUVUQSxHQUVKa0UsR0FDVG5KLEVBQUFBLFdBQ0YwRSxRQUFPQyxlQUFldkYsRUFBUyxjQUFnQndGLE9BQU8sSUFDdER4RixFQUFBQSxXQUFrQitKLEdBS2IsU0FBUzlKLEVBQVFELEVBQVNILEdBRS9CLFlBQ0EsSUFBSTRKLEdBQWF2SSxNQUFRQSxLQUFLdUksV0FBYyxTQUFVQyxFQUFHQyxHQUVyRCxRQUFTQyxLQUFPMUksS0FBSzJJLFlBQWNILEVBRG5DLElBQUssR0FBSW5KLEtBQUtvSixHQUFPQSxFQUFFSCxlQUFlakosS0FBSW1KLEVBQUVuSixHQUFLb0osRUFBRXBKLEdBRW5EbUosR0FBRS9ILFVBQWtCLE9BQU5nSSxFQUFhckUsT0FBT3dFLE9BQU9ILElBQU1DLEVBQUdqSSxVQUFZZ0ksRUFBRWhJLFVBQVcsR0FBSWlJLEtBRS9FaEosRUFBVWYsRUFBb0IsR0FDOUJvSyxFQUFRLFNBQVVELEdBRWxCLFFBQVNDLEdBQUt6SCxFQUFTa0QsR0FFbkJBLEVBQVFjLFdBQWEsV0FDckJ3RCxFQUFPNUosS0FBS2MsS0FBTXNCLEVBQVNrRCxHQU0vQixNQVZBK0QsR0FBVVEsRUFBTUQsR0FNaEJDLEVBQUt0SSxVQUFVbUUsWUFBYyxXQUN6QixHQUFJRCxHQUFXbUUsRUFBT3JJLFVBQVVtRSxZQUFZMUYsS0FBS2MsS0FDakQsT0FBTzJFLElBRUpvRSxHQUNUckosRUFBQUEsV0FDRjBFLFFBQU9DLGVBQWV2RixFQUFTLGNBQWdCd0YsT0FBTyxJQUN0RHhGLEVBQUFBLFdBQWtCaUsiLCJmaWxlIjoicG93ZXJiaS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0dmFyIGNvcmVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XHJcblx0LyoqXHJcblx0ICogTWFrZSBQb3dlckJpIGF2YWlsYWJsZSBvbiBnbG9iYWwgb2JqZWN0IGZvciB1c2UgaW4gYXBwcyB3aXRob3V0IG1vZHVsZSBsb2FkaW5nIHN1cHBvcnQuXHJcblx0ICogU2F2ZSBjbGFzcyB0byBhbGxvdyBjcmVhdGluZyBhbiBpbnN0YW5jZSBvZiB0aGUgc2VydmljZS5cclxuXHQgKiBDcmVhdGUgaW5zdGFuY2Ugb2YgY2xhc3Mgd2l0aCBkZWZhdWx0IGNvbmZpZyBmb3Igbm9ybWFsIHVzYWdlLlxyXG5cdCAqL1xyXG5cdHdpbmRvdy5Qb3dlcmJpID0gY29yZV8xLmRlZmF1bHQ7XHJcblx0d2luZG93LnBvd2VyYmkgPSBuZXcgY29yZV8xLmRlZmF1bHQoKTtcclxuXG5cbi8qKiovIH0sXG4vKiAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHR2YXIgZW1iZWRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XHJcblx0dmFyIHJlcG9ydF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcclxuXHR2YXIgdGlsZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcclxuXHR2YXIgdXRpbF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcclxuXHR2YXIgUG93ZXJCaSA9IChmdW5jdGlvbiAoKSB7XHJcblx0ICAgIGZ1bmN0aW9uIFBvd2VyQmkoY29uZmlnKSB7XHJcblx0ICAgICAgICBpZiAoY29uZmlnID09PSB2b2lkIDApIHsgY29uZmlnID0ge307IH1cclxuXHQgICAgICAgIHRoaXMuZW1iZWRzID0gW107XHJcblx0ICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMub25SZWNlaXZlTWVzc2FnZS5iaW5kKHRoaXMpLCBmYWxzZSk7XHJcblx0ICAgICAgICAvLyBUT0RPOiBDaGFuZ2Ugd2hlbiBPYmplY3QuYXNzaWduIGlzIGF2YWlsYWJsZS5cclxuXHQgICAgICAgIHRoaXMuY29uZmlnID0gdXRpbF8xLmRlZmF1bHQuYXNzaWduKHt9LCBQb3dlckJpLmRlZmF1bHRDb25maWcsIGNvbmZpZyk7XHJcblx0ICAgICAgICBpZiAodGhpcy5jb25maWcuYXV0b0VtYmVkT25Db250ZW50TG9hZGVkKSB7XHJcblx0ICAgICAgICAgICAgdGhpcy5lbmFibGVBdXRvRW1iZWQoKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgfVxyXG5cdCAgICAvKipcclxuXHQgICAgICogSGFuZGxlciBmb3IgRE9NQ29udGVudExvYWRlZCB3aGljaCBzZWFyY2hlcyBET00gZm9yIGVsZW1lbnRzIGhhdmluZyAncG93ZXJiaS1lbWJlZC11cmwnIGF0dHJpYnV0ZVxyXG5cdCAgICAgKiBhbmQgYXV0b21hdGljYWxseSBhdHRlbXB0cyB0byBlbWJlZCBhIHBvd2VyYmkgY29tcG9uZW50IGJhc2VkIG9uIGluZm9ybWF0aW9uIGZyb20gdGhlIGF0dHJpYnV0ZXMuXHJcblx0ICAgICAqIE9ubHkgcnVucyBpZiBgY29uZmlnLmF1dG9FbWJlZE9uQ29udGVudExvYWRlZGAgaXMgdHJ1ZSB3aGVuIHRoZSBzZXJ2aWNlIGlzIGNyZWF0ZWQuXHJcblx0ICAgICAqL1xyXG5cdCAgICBQb3dlckJpLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKGNvbnRhaW5lcikge1xyXG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHQgICAgICAgIGNvbnRhaW5lciA9IChjb250YWluZXIgJiYgY29udGFpbmVyIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpID8gY29udGFpbmVyIDogZG9jdW1lbnQuYm9keTtcclxuXHQgICAgICAgIHZhciBlbGVtZW50cyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKFwiW1wiICsgZW1iZWRfMS5kZWZhdWx0LmVtYmVkVXJsQXR0cmlidXRlICsgXCJdXCIpKTtcclxuXHQgICAgICAgIGVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsgcmV0dXJuIF90aGlzLmVtYmVkKGVsZW1lbnQpOyB9KTtcclxuXHQgICAgfTtcclxuXHQgICAgLyoqXHJcblx0ICAgICAqIEdpdmVuIGFuIGh0bWwgZWxlbWVudCBlbWJlZCBjb21wb25lbnQgYmFzZWQgb24gY29uZmlndXJhdGlvbi5cclxuXHQgICAgICogSWYgY29tcG9uZW50IGhhcyBhbHJlYWR5IGJlZW4gY3JlYXRlZCBhbmQgYXR0YWNoZWQgdG8gZWxlZW1udCBzaW1wbHkgcmV0dXJuIGl0IHRvIHByZXZlbnQgY3JlYXRpbmcgZHVwbGljYXRlIGNvbXBvbmVudHMgZm9yIHNhbWUgZWxlbWVudC5cclxuXHQgICAgICovXHJcblx0ICAgIFBvd2VyQmkucHJvdG90eXBlLmVtYmVkID0gZnVuY3Rpb24gKGVsZW1lbnQsIGNvbmZpZykge1xyXG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHQgICAgICAgIGlmIChjb25maWcgPT09IHZvaWQgMCkgeyBjb25maWcgPSB7fTsgfVxyXG5cdCAgICAgICAgdmFyIGluc3RhbmNlO1xyXG5cdCAgICAgICAgdmFyIHBvd2VyQmlFbGVtZW50ID0gZWxlbWVudDtcclxuXHQgICAgICAgIGlmIChwb3dlckJpRWxlbWVudC5wb3dlckJpRW1iZWQgJiYgIWNvbmZpZy5vdmVyd3JpdGUpIHtcclxuXHQgICAgICAgICAgICBpbnN0YW5jZSA9IHBvd2VyQmlFbGVtZW50LnBvd2VyQmlFbWJlZDtcclxuXHQgICAgICAgICAgICByZXR1cm4gaW5zdGFuY2U7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICAvKiogSWYgY29tcG9uZW50IGlzIGFscmVhZHkgcmVnaXN0ZXJlZCBvbiB0aGlzIGVsZW1lbnQsIGJ1dCB3ZSBhcmUgc3VwcG9zZWQgdG8gb3ZlcndyaXRlLCByZW1vdmUgZXhpc3RpbmcgY29tcG9uZW50IGZyb20gcmVnaXN0cnkgKi9cclxuXHQgICAgICAgIGlmIChwb3dlckJpRWxlbWVudC5wb3dlckJpRW1iZWQgJiYgY29uZmlnLm92ZXJ3cml0ZSkge1xyXG5cdCAgICAgICAgICAgIHRoaXMucmVtb3ZlKHBvd2VyQmlFbGVtZW50LnBvd2VyQmlFbWJlZCk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICB2YXIgY29tcG9uZW50VHlwZSA9IGNvbmZpZy50eXBlIHx8IGVsZW1lbnQuZ2V0QXR0cmlidXRlKGVtYmVkXzEuZGVmYXVsdC50eXBlQXR0cmlidXRlKTtcclxuXHQgICAgICAgIGlmICghY29tcG9uZW50VHlwZSkge1xyXG5cdCAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkF0dGVtcHRlZCB0byBlbWJlZCB1c2luZyBjb25maWcgXCIgKyBKU09OLnN0cmluZ2lmeShjb25maWcpICsgXCIgb24gZWxlbWVudCBcIiArIGVsZW1lbnQub3V0ZXJIVE1MICsgXCIsIGJ1dCBjb3VsZCBub3QgZGV0ZXJtaW5lIHdoYXQgdHlwZSBvZiBjb21wb25lbnQgdG8gZW1iZWQuIFlvdSBtdXN0IHNwZWNpZnkgYSB0eXBlIGluIHRoZSBjb25maWd1cmF0aW9uIG9yIGFzIGFuIGF0dHJpYnV0ZSBzdWNoIGFzICdcIiArIGVtYmVkXzEuZGVmYXVsdC50eXBlQXR0cmlidXRlICsgXCI9XFxcIlwiICsgcmVwb3J0XzEuZGVmYXVsdC5uYW1lLnRvTG93ZXJDYXNlKCkgKyBcIlxcXCInLlwiKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIHZhciBDb21wb25lbnQgPSB1dGlsXzEuZGVmYXVsdC5maW5kKGZ1bmN0aW9uIChjb21wb25lbnQpIHsgcmV0dXJuIGNvbXBvbmVudFR5cGUgPT09IGNvbXBvbmVudC5uYW1lLnRvTG93ZXJDYXNlKCk7IH0sIFBvd2VyQmkuY29tcG9uZW50cyk7XHJcblx0ICAgICAgICBpZiAoIUNvbXBvbmVudCkge1xyXG5cdCAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkF0dGVtcHRlZCB0byBlbWJlZCBjb21wb25lbnQgb2YgdHlwZTogXCIgKyBjb21wb25lbnRUeXBlICsgXCIgYnV0IGRpZCBub3QgZmluZCBhbnkgbWF0Y2hpbmcgY29tcG9uZW50LiAgUGxlYXNlIHZlcmlmeSB0aGUgdHlwZSB5b3Ugc3BlY2lmaWVkIGlzIGludGVuZGVkLlwiKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIC8vIFRPRE86IENvbnNpZGVyIHJlbW92aW5nIGluIGZhdm9yIG9mIHBhc3NpbmcgcmVmZXJlbmNlIHRvIGB0aGlzYCBpbiBjb25zdHJ1Y3RvclxyXG5cdCAgICAgICAgLy8gVGhlIGdldEdsb2JhbEFjY2Vzc1Rva2VuIGZ1bmN0aW9uIGlzIG9ubHkgaGVyZSBzbyB0aGF0IHRoZSBjb21wb25lbnRzIChUaWxlIHwgUmVwb3J0KSBjYW4gZ2V0IHRoZSBnbG9iYWwgYWNjZXNzIHRva2VuIHdpdGhvdXQgbmVlZGluZyByZWZlcmVuY2VcclxuXHQgICAgICAgIC8vIHRvIHRoZSBzZXJ2aWNlIHRoYXQgdGhleSBhcmUgcmVnaXN0ZXJlZCB3aXRoaW4gYmVjYXVlcyBpdCBjcmVhdGVzIGNpcmN1bGFyIGRlcGVuZGVuY2llc1xyXG5cdCAgICAgICAgY29uZmlnLmdldEdsb2JhbEFjY2Vzc1Rva2VuID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuYWNjZXNzVG9rZW47IH07XHJcblx0ICAgICAgICBpbnN0YW5jZSA9IG5ldyBDb21wb25lbnQoZWxlbWVudCwgY29uZmlnKTtcclxuXHQgICAgICAgIHBvd2VyQmlFbGVtZW50LnBvd2VyQmlFbWJlZCA9IGluc3RhbmNlO1xyXG5cdCAgICAgICAgdGhpcy5lbWJlZHMucHVzaChpbnN0YW5jZSk7XHJcblx0ICAgICAgICByZXR1cm4gaW5zdGFuY2U7XHJcblx0ICAgIH07XHJcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBBZGRzIGV2ZW50IGhhbmRsZXIgZm9yIERPTUNvbnRlbnRMb2FkZWQgd2hpY2ggZmluZHMgYWxsIGVsZW1lbnRzIGluIERPTSB3aXRoIGF0dHJpYnV0ZSBwb3dlcmJpLWVtYmVkLXVybFxyXG5cdCAgICAgKiB0aGVuIGF0dGVtcHRzIHRvIGluaXRpYXRlIHRoZSBlbWJlZCBwcm9jZXNzIGJhc2VkIG9uIGRhdGEgZnJvbSBvdGhlciBwb3dlcmJpLSogYXR0cmlidXRlcy5cclxuXHQgICAgICogKFRoaXMgaXMgdXN1YWxseSBvbmx5IHVzZWZ1bCBmb3IgYXBwbGljYXRpb25zIHJlbmRlcmVkIG9uIGJ5IHRoZSBzZXJ2ZXIgc2luY2UgYWxsIHRoZSBkYXRhIG5lZWRlZCB3aWxsIGJlIGF2YWlsYWJsZSBieSB0aGUgdGltZSB0aGUgaGFuZGxlciBpcyBjYWxsZWQuKVxyXG5cdCAgICAgKi9cclxuXHQgICAgUG93ZXJCaS5wcm90b3R5cGUuZW5hYmxlQXV0b0VtYmVkID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHQgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiBfdGhpcy5pbml0KGRvY3VtZW50LmJvZHkpOyB9LCBmYWxzZSk7XHJcblx0ICAgIH07XHJcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBSZXR1cm5zIGluc3RhbmNlIG9mIGNvbXBvbmVudCBhc3NvY2lhdGVkIHdpdGggZWxlbWVudC5cclxuXHQgICAgICovXHJcblx0ICAgIFBvd2VyQmkucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcblx0ICAgICAgICB2YXIgcG93ZXJCaUVsZW1lbnQgPSBlbGVtZW50O1xyXG5cdCAgICAgICAgaWYgKCFwb3dlckJpRWxlbWVudC5wb3dlckJpRW1iZWQpIHtcclxuXHQgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJZb3UgYXR0ZW1wdGVkIHRvIGdldCBhbiBpbnN0YW5jZSBvZiBwb3dlcmJpIGNvbXBvbmVudCBhc3NvY2lhdGVkIHdpdGggZWxlbWVudDogXCIgKyBlbGVtZW50Lm91dGVySFRNTCArIFwiIGJ1dCB0aGVyZSB3YXMgbm8gYXNzb2NpYXRlZCBpbnN0YW5jZS5cIik7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICByZXR1cm4gcG93ZXJCaUVsZW1lbnQucG93ZXJCaUVtYmVkO1xyXG5cdCAgICB9O1xyXG5cdCAgICAvKipcclxuXHQgICAgICogUmVtb3ZlIGNvbXBvbmVudCBmcm9tIHRoZSBsaXN0IG9mIGVtYmVkZGVkIGNvbXBvbmVudHMuXHJcblx0ICAgICAqL1xyXG5cdCAgICBQb3dlckJpLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoY29tcG9uZW50KSB7XHJcblx0ICAgICAgICB1dGlsXzEuZGVmYXVsdC5yZW1vdmUoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHggPT09IGNvbXBvbmVudDsgfSwgdGhpcy5lbWJlZHMpO1xyXG5cdCAgICB9O1xyXG5cdCAgICAvKipcclxuXHQgICAgICogSGFuZGxlciBmb3Igd2luZG93IG1lc3NhZ2UgZXZlbnQuXHJcblx0ICAgICAqIFBhcnNlcyBldmVudCBkYXRhIGFzIGpzb24gYW5kIGlmIGl0IGNhbWUgZnJvbSBhbiBpZnJhbWUgdGhhdCBtYXRjaGVzIG9uZSBmcm9tIGFuIGV4aXN0aW5nIGVtYmVkZWQgY29tcG9uZW50IHJlLWRpc3BhdGNoZXMgdGhlIGV2ZW50IG9uIHRoZSBpZnJhbWUncyBwYXJlbnQgZWxlbWVudFxyXG5cdCAgICAgKiB0byBzaW11bGF0ZSB0aGUgZXZlbnQgYnViYmxpbmcgdGhyb3VnaCB0aGUgdHdvIHNlcGFyYXRlIHdpbmRvd3MgLyBET01zLlxyXG5cdCAgICAgKlxyXG5cdCAgICAgKiBJZiBhbiBlcnJvciBvY2N1cnMgd2hlbiBwYXJzaW5nIGV2ZW50LmRhdGEgY2FsbCBlcnJvciBoYW5kbGVyIHByb3ZpZGVkIGR1cmluZyBjb25maWd1cmF0aW9uLlxyXG5cdCAgICAgKi9cclxuXHQgICAgUG93ZXJCaS5wcm90b3R5cGUub25SZWNlaXZlTWVzc2FnZSA9IGZ1bmN0aW9uIChldmVudCkge1xyXG5cdCAgICAgICAgaWYgKCFldmVudCkge1xyXG5cdCAgICAgICAgICAgIHJldHVybjtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIHRyeSB7XHJcblx0ICAgICAgICAgICAgLy8gT25seSByYWlzZSB0aGUgZXZlbnQgb24gdGhlIGVtYmVkIHRoYXQgbWF0Y2hlcyB0aGUgcG9zdCBtZXNzYWdlIG9yaWdpblxyXG5cdCAgICAgICAgICAgIHZhciBlbWJlZCA9IHV0aWxfMS5kZWZhdWx0LmZpbmQoZnVuY3Rpb24gKGVtYmVkKSB7IHJldHVybiBldmVudC5zb3VyY2UgPT09IGVtYmVkLmlmcmFtZS5jb250ZW50V2luZG93OyB9LCB0aGlzLmVtYmVkcyk7XHJcblx0ICAgICAgICAgICAgaWYgKGVtYmVkKSB7XHJcblx0ICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlRGF0YSA9IHR5cGVvZiBldmVudC5kYXRhID09PSAnc3RyaW5nJyA/IEpTT04ucGFyc2UoZXZlbnQuZGF0YSkgOiBldmVudC5kYXRhO1xyXG5cdCAgICAgICAgICAgICAgICB1dGlsXzEuZGVmYXVsdC5yYWlzZUN1c3RvbUV2ZW50KGVtYmVkLmVsZW1lbnQsIFBvd2VyQmkuZXZlbnRNYXBbbWVzc2FnZURhdGEuZXZlbnRdLCBtZXNzYWdlRGF0YSk7XHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgY2F0Y2ggKGUpIHtcclxuXHQgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuY29uZmlnLm9uRXJyb3IgPT09ICdmdW5jdGlvbicpIHtcclxuXHQgICAgICAgICAgICAgICAgdGhpcy5jb25maWcub25FcnJvci5jYWxsKHdpbmRvdywgZSk7XHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgICAgIGVsc2Uge1xyXG5cdCAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgIH1cclxuXHQgICAgfTtcclxuXHQgICAgLyoqXHJcblx0ICAgICAqIExpc3Qgb2YgY29tcG9uZW50cyB0aGlzIHNlcnZpY2UgY2FuIGVtYmVkLlxyXG5cdCAgICAgKi9cclxuXHQgICAgUG93ZXJCaS5jb21wb25lbnRzID0gW1xyXG5cdCAgICAgICAgdGlsZV8xLmRlZmF1bHQsXHJcblx0ICAgICAgICByZXBvcnRfMS5kZWZhdWx0XHJcblx0ICAgIF07XHJcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBNYXBwaW5nIG9mIGV2ZW50IG5hbWVzIGZyb20gaWZyYW1lIHBvc3RNZXNzYWdlIHRvIHRoZWlyIG5hbWUgcGVyY2lldmVkIGJ5IHBhcmVudCBET00uXHJcblx0ICAgICAqIEV4YW1wbGU6IFVzZXIgY2xpY2tzIG9uIGVtYmVkZWQgcmVwb3J0IHdoaWNoIGlzIGluc2lkZSBpZnJhbWUuIFRoZSBpZnJhbWUgY29kZSByZXNlbmRzXHJcblx0ICAgICAqIGV2ZW50IGFzIHBvc3RNZXNzYWdlIHdpdGggeyBldmVudDogJ3JlcG9ydENsaWNrZWQnLCAuLi4gfSBhbmQgdGhpcyBuYW1lIGlzIGNvbnZlcnRlZCB0byBoeXBoZW5hdGVkXHJcblx0ICAgICAqIG5hbWUgYW5kIGRpc3BhdGNoZWQgZnJvbSB0aGUgcGFyZW50IGVsZW1lbnQgb2YgdGhlIGlmcmFtZSB0byBzaW11bGF0ZSB0aGUgZXZlbnQgYnViYmxpbmcgdGhyb3VnaCB0d29cclxuXHQgICAgICogZGlmZmVyZW50IHdpbmRvd3MgLyBET01zXHJcblx0ICAgICAqL1xyXG5cdCAgICBQb3dlckJpLmV2ZW50TWFwID0ge1xyXG5cdCAgICAgICAgJ3RpbGVDbGlja2VkJzogJ3RpbGUtY2xpY2snLFxyXG5cdCAgICAgICAgJ3RpbGVMb2FkZWQnOiAndGlsZS1sb2FkJyxcclxuXHQgICAgICAgICdyZXBvcnRQYWdlTG9hZGVkJzogJ3JlcG9ydC1sb2FkJ1xyXG5cdCAgICB9O1xyXG5cdCAgICAvKipcclxuXHQgICAgICogRGVmYXVsdCBjb25maWd1cmF0aW9uIGZvciBzZXJ2aWNlLlxyXG5cdCAgICAgKi9cclxuXHQgICAgUG93ZXJCaS5kZWZhdWx0Q29uZmlnID0ge1xyXG5cdCAgICAgICAgYXV0b0VtYmVkT25Db250ZW50TG9hZGVkOiBmYWxzZSxcclxuXHQgICAgICAgIG9uRXJyb3I6IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG5cdCAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcblx0ICAgICAgICAgICAgICAgIGFyZ3NbX2kgLSAwXSA9IGFyZ3VtZW50c1tfaV07XHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgICAgIHJldHVybiBjb25zb2xlLmxvZyhhcmdzWzBdLCBhcmdzLnNsaWNlKDEpKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgfTtcclxuXHQgICAgcmV0dXJuIFBvd2VyQmk7XHJcblx0fSgpKTtcclxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcblx0ZXhwb3J0cy5kZWZhdWx0ID0gUG93ZXJCaTtcclxuXG5cbi8qKiovIH0sXG4vKiAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHR2YXIgdXRpbF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcclxuXHR2YXIgRW1iZWQgPSAoZnVuY3Rpb24gKCkge1xyXG5cdCAgICBmdW5jdGlvbiBFbWJlZChlbGVtZW50LCBvcHRpb25zKSB7XHJcblx0ICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xyXG5cdCAgICAgICAgLy8gVE9ETzogQ2hhbmdlIHdoZW4gT2JqZWN0LmFzc2lnbiBpcyBhdmFpbGFibGUuXHJcblx0ICAgICAgICB0aGlzLm9wdGlvbnMgPSB1dGlsXzEuZGVmYXVsdC5hc3NpZ24oe30sIEVtYmVkLmRlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcclxuXHQgICAgICAgIHRoaXMub3B0aW9ucy5hY2Nlc3NUb2tlbiA9IHRoaXMuZ2V0QWNjZXNzVG9rZW4oKTtcclxuXHQgICAgICAgIHRoaXMub3B0aW9ucy5lbWJlZFVybCA9IHRoaXMuZ2V0RW1iZWRVcmwoKTtcclxuXHQgICAgICAgIHZhciBpZnJhbWVIdG1sID0gXCI8aWZyYW1lIHN0eWxlPVxcXCJ3aWR0aDoxMDAlO2hlaWdodDoxMDAlO1xcXCIgc3JjPVxcXCJcIiArIHRoaXMub3B0aW9ucy5lbWJlZFVybCArIFwiXFxcIiBzY3JvbGxpbmc9XFxcIm5vXFxcIiBhbGxvd2Z1bGxzY3JlZW49XFxcInRydWVcXFwiPjwvaWZyYW1lPlwiO1xyXG5cdCAgICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9IGlmcmFtZUh0bWw7XHJcblx0ICAgICAgICB0aGlzLmlmcmFtZSA9IHRoaXMuZWxlbWVudC5jaGlsZE5vZGVzWzBdO1xyXG5cdCAgICAgICAgdGhpcy5pZnJhbWUuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIHRoaXMubG9hZC5iaW5kKHRoaXMpLCBmYWxzZSk7XHJcblx0ICAgIH1cclxuXHQgICAgLyoqXHJcblx0ICAgICAqIEhhbmRsZXIgZm9yIHdoZW4gdGhlIGlmcmFtZSBoYXMgZmluaXNoZWQgbG9hZGluZyB0aGUgcG93ZXJiaSBwbGFjZWhvbGRlciBwYWdlLlxyXG5cdCAgICAgKiBUaGlzIGlzIHVzZWQgdG8gaW5qZWN0IGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBzdWNoIGFzIGFjY2VzcyB0b2tlbiwgbG9hZEFjdGlvbiwgZXRjXHJcblx0ICAgICAqIHdoaWNoIGFsbG93IGlmcmFtZSB0byBsb2FkIHRoZSBhY3R1YWwgcmVwb3J0IHdpdGggYXV0aGVudGljYXRpb24uXHJcblx0ICAgICAqL1xyXG5cdCAgICBFbWJlZC5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHZhciBjb21wdXRlZFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5lbGVtZW50KTtcclxuXHQgICAgICAgIHZhciBpbml0RXZlbnRBcmdzID0ge1xyXG5cdCAgICAgICAgICAgIG1lc3NhZ2U6IHtcclxuXHQgICAgICAgICAgICAgICAgYWN0aW9uOiB0aGlzLm9wdGlvbnMubG9hZEFjdGlvbixcclxuXHQgICAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IHRoaXMub3B0aW9ucy5hY2Nlc3NUb2tlbixcclxuXHQgICAgICAgICAgICAgICAgd2lkdGg6IGNvbXB1dGVkU3R5bGUud2lkdGgsXHJcblx0ICAgICAgICAgICAgICAgIGhlaWdodDogY29tcHV0ZWRTdHlsZS5oZWlnaHRcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICB9O1xyXG5cdCAgICAgICAgdXRpbF8xLmRlZmF1bHQucmFpc2VDdXN0b21FdmVudCh0aGlzLmVsZW1lbnQsICdlbWJlZC1pbml0JywgaW5pdEV2ZW50QXJncyk7XHJcblx0ICAgICAgICB0aGlzLmlmcmFtZS5jb250ZW50V2luZG93LnBvc3RNZXNzYWdlKEpTT04uc3RyaW5naWZ5KGluaXRFdmVudEFyZ3MubWVzc2FnZSksICcqJyk7XHJcblx0ICAgIH07XHJcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBHZXQgYWNjZXNzIHRva2VuIGZyb20gZmlyc3QgYXZhaWxhYmxlIGxvY2F0aW9uOiBvcHRpb25zLCBhdHRyaWJ1dGUsIGdsb2JhbC5cclxuXHQgICAgICovXHJcblx0ICAgIEVtYmVkLnByb3RvdHlwZS5nZXRBY2Nlc3NUb2tlbiA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHZhciBhY2Nlc3NUb2tlbiA9IHRoaXMub3B0aW9ucy5hY2Nlc3NUb2tlbiB8fCB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKEVtYmVkLmFjY2Vzc1Rva2VuQXR0cmlidXRlKSB8fCB0aGlzLm9wdGlvbnMuZ2V0R2xvYmFsQWNjZXNzVG9rZW4oKTtcclxuXHQgICAgICAgIGlmICghYWNjZXNzVG9rZW4pIHtcclxuXHQgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBhY2Nlc3MgdG9rZW4gd2FzIGZvdW5kIGZvciBlbGVtZW50LiBZb3UgbXVzdCBzcGVjaWZ5IGFuIGFjY2VzcyB0b2tlbiBkaXJlY3RseSBvbiB0aGUgZWxlbWVudCB1c2luZyBhdHRyaWJ1dGUgJ1wiICsgRW1iZWQuYWNjZXNzVG9rZW5BdHRyaWJ1dGUgKyBcIicgb3Igc3BlY2lmeSBhIGdsb2JhbCB0b2tlbiBhdDogcG93ZXJiaS5hY2Nlc3NUb2tlbi5cIik7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICByZXR1cm4gYWNjZXNzVG9rZW47XHJcblx0ICAgIH07XHJcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBHZXQgZW1iZWQgdXJsIGZyb20gZmlyc3QgYXZhaWxhYmxlIGxvY2F0aW9uOiBvcHRpb25zLCBhdHRyaWJ1dGUuXHJcblx0ICAgICAqL1xyXG5cdCAgICBFbWJlZC5wcm90b3R5cGUuZ2V0RW1iZWRVcmwgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICB2YXIgZW1iZWRVcmwgPSB0aGlzLm9wdGlvbnMuZW1iZWRVcmwgfHwgdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShFbWJlZC5lbWJlZFVybEF0dHJpYnV0ZSk7XHJcblx0ICAgICAgICBpZiAodHlwZW9mIGVtYmVkVXJsICE9PSAnc3RyaW5nJyB8fCBlbWJlZFVybC5sZW5ndGggPT09IDApIHtcclxuXHQgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFbWJlZCBVcmwgaXMgcmVxdWlyZWQsIGJ1dCBpdCB3YXMgbm90IGZvdW5kLiBZb3UgbXVzdCBwcm92aWRlIGFuIGVtYmVkIHVybCBlaXRoZXIgYXMgcGFydCBvZiBlbWJlZCBjb25maWd1cmF0aW9uIG9yIGFzIGF0dHJpYnV0ZSAnXCIgKyBFbWJlZC5lbWJlZFVybEF0dHJpYnV0ZSArIFwiJy5cIik7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICByZXR1cm4gZW1iZWRVcmw7XHJcblx0ICAgIH07XHJcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBSZXF1ZXN0IHRoZSBicm93c2VyIHRvIG1ha2UgdGhlIGNvbXBvbmVudHMgaWZyYW1lIGZ1bGxzY3JlZW4uXHJcblx0ICAgICAqL1xyXG5cdCAgICBFbWJlZC5wcm90b3R5cGUuZnVsbHNjcmVlbiA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHZhciByZXF1ZXN0RnVsbFNjcmVlbiA9IHRoaXMuaWZyYW1lLnJlcXVlc3RGdWxsc2NyZWVuIHx8IHRoaXMuaWZyYW1lLm1zUmVxdWVzdEZ1bGxzY3JlZW4gfHwgdGhpcy5pZnJhbWUubW96UmVxdWVzdEZ1bGxTY3JlZW4gfHwgdGhpcy5pZnJhbWUud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW47XHJcblx0ICAgICAgICByZXF1ZXN0RnVsbFNjcmVlbi5jYWxsKHRoaXMuaWZyYW1lKTtcclxuXHQgICAgfTtcclxuXHQgICAgLyoqXHJcblx0ICAgICAqIEV4aXQgZnVsbHNjcmVlbi5cclxuXHQgICAgICovXHJcblx0ICAgIEVtYmVkLnByb3RvdHlwZS5leGl0RnVsbHNjcmVlbiA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIGlmICghdGhpcy5pc0Z1bGxzY3JlZW4odGhpcy5pZnJhbWUpKSB7XHJcblx0ICAgICAgICAgICAgcmV0dXJuO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgdmFyIGV4aXRGdWxsc2NyZWVuID0gZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4gfHwgZG9jdW1lbnQubW96Q2FuY2VsRnVsbFNjcmVlbiB8fCBkb2N1bWVudC53ZWJraXRFeGl0RnVsbHNjcmVlbiB8fCBkb2N1bWVudC5tc0V4aXRGdWxsc2NyZWVuO1xyXG5cdCAgICAgICAgZXhpdEZ1bGxzY3JlZW4uY2FsbChkb2N1bWVudCk7XHJcblx0ICAgIH07XHJcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBSZXR1cm4gdHJ1ZSBpZiBpZnJhbWUgaXMgZnVsbHNjcmVlbixcclxuXHQgICAgICogb3RoZXJ3aXNlIHJldHVybiBmYWxzZVxyXG5cdCAgICAgKi9cclxuXHQgICAgRW1iZWQucHJvdG90eXBlLmlzRnVsbHNjcmVlbiA9IGZ1bmN0aW9uIChpZnJhbWUpIHtcclxuXHQgICAgICAgIHZhciBvcHRpb25zID0gWydmdWxsc2NyZWVuRWxlbWVudCcsICd3ZWJraXRGdWxsc2NyZWVuRWxlbWVudCcsICdtb3pGdWxsc2NyZWVuU2NyZWVuRWxlbWVudCcsICdtc0Z1bGxzY3JlZW5FbGVtZW50J107XHJcblx0ICAgICAgICByZXR1cm4gb3B0aW9ucy5zb21lKGZ1bmN0aW9uIChvcHRpb24pIHsgcmV0dXJuIGRvY3VtZW50W29wdGlvbl0gPT09IGlmcmFtZTsgfSk7XHJcblx0ICAgIH07XHJcblx0ICAgIEVtYmVkLmVtYmVkVXJsQXR0cmlidXRlID0gJ3Bvd2VyYmktZW1iZWQtdXJsJztcclxuXHQgICAgRW1iZWQuYWNjZXNzVG9rZW5BdHRyaWJ1dGUgPSAncG93ZXJiaS1hY2Nlc3MtdG9rZW4nO1xyXG5cdCAgICBFbWJlZC50eXBlQXR0cmlidXRlID0gJ3Bvd2VyYmktdHlwZSc7XHJcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBEZWZhdWx0IG9wdGlvbnMgZm9yIGVtYmVkZGFibGUgY29tcG9uZW50LlxyXG5cdCAgICAgKi9cclxuXHQgICAgRW1iZWQuZGVmYXVsdE9wdGlvbnMgPSB7XHJcblx0ICAgICAgICBmaWx0ZXJQYW5lRW5hYmxlZDogdHJ1ZSxcclxuXHQgICAgICAgIG92ZXJ3cml0ZTogdHJ1ZVxyXG5cdCAgICB9O1xyXG5cdCAgICByZXR1cm4gRW1iZWQ7XHJcblx0fSgpKTtcclxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcblx0ZXhwb3J0cy5kZWZhdWx0ID0gRW1iZWQ7XHJcblxuXG4vKioqLyB9LFxuLyogMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0dmFyIFV0aWxzID0gKGZ1bmN0aW9uICgpIHtcclxuXHQgICAgZnVuY3Rpb24gVXRpbHMoKSB7XHJcblx0ICAgIH1cclxuXHQgICAgVXRpbHMucmFpc2VDdXN0b21FdmVudCA9IGZ1bmN0aW9uIChlbGVtZW50LCBldmVudE5hbWUsIGV2ZW50RGF0YSkge1xyXG5cdCAgICAgICAgdmFyIGN1c3RvbUV2ZW50O1xyXG5cdCAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cuQ3VzdG9tRXZlbnQgPT09ICdmdW5jdGlvbicpIHtcclxuXHQgICAgICAgICAgICBjdXN0b21FdmVudCA9IG5ldyBDdXN0b21FdmVudChldmVudE5hbWUsIHtcclxuXHQgICAgICAgICAgICAgICAgZGV0YWlsOiBldmVudERhdGEsXHJcblx0ICAgICAgICAgICAgICAgIGJ1YmJsZXM6IHRydWUsXHJcblx0ICAgICAgICAgICAgICAgIGNhbmNlbGFibGU6IHRydWVcclxuXHQgICAgICAgICAgICB9KTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIGVsc2Uge1xyXG5cdCAgICAgICAgICAgIGN1c3RvbUV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XHJcblx0ICAgICAgICAgICAgY3VzdG9tRXZlbnQuaW5pdEN1c3RvbUV2ZW50KGV2ZW50TmFtZSwgdHJ1ZSwgdHJ1ZSwgZXZlbnREYXRhKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIGVsZW1lbnQuZGlzcGF0Y2hFdmVudChjdXN0b21FdmVudCk7XHJcblx0ICAgICAgICBpZiAoY3VzdG9tRXZlbnQuZGVmYXVsdFByZXZlbnRlZCB8fCAhY3VzdG9tRXZlbnQucmV0dXJuVmFsdWUpIHtcclxuXHQgICAgICAgICAgICByZXR1cm47XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICB2YXIgaW5saW5lRXZlbnRBdHRyID0gJ29uJyArIGV2ZW50TmFtZS5yZXBsYWNlKCctJywgJycpO1xyXG5cdCAgICAgICAgdmFyIGlubGluZVNjcmlwdCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKGlubGluZUV2ZW50QXR0cik7XHJcblx0ICAgICAgICBpZiAoaW5saW5lU2NyaXB0KSB7XHJcblx0ICAgICAgICAgICAgZXZhbC5jYWxsKGVsZW1lbnQsIGlubGluZVNjcmlwdCk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgIH07XHJcblx0ICAgIFV0aWxzLmZpbmRJbmRleCA9IGZ1bmN0aW9uIChwcmVkaWNhdGUsIHhzKSB7XHJcblx0ICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoeHMpKSB7XHJcblx0ICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiWW91IGF0dGVtcHRlZCB0byBjYWxsIGZpbmQgd2l0aCBzZWNvbmQgcGFyYW1ldGVyIHRoYXQgd2FzIG5vdCBhbiBhcnJheS4gWW91IHBhc3NlZDogXCIgKyB4cyk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICB2YXIgaW5kZXg7XHJcblx0ICAgICAgICB4cy5zb21lKGZ1bmN0aW9uICh4LCBpKSB7XHJcblx0ICAgICAgICAgICAgaWYgKHByZWRpY2F0ZSh4KSkge1xyXG5cdCAgICAgICAgICAgICAgICBpbmRleCA9IGk7XHJcblx0ICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgIH0pO1xyXG5cdCAgICAgICAgcmV0dXJuIGluZGV4O1xyXG5cdCAgICB9O1xyXG5cdCAgICBVdGlscy5maW5kID0gZnVuY3Rpb24gKHByZWRpY2F0ZSwgeHMpIHtcclxuXHQgICAgICAgIHZhciBpbmRleCA9IFV0aWxzLmZpbmRJbmRleChwcmVkaWNhdGUsIHhzKTtcclxuXHQgICAgICAgIHJldHVybiB4c1tpbmRleF07XHJcblx0ICAgIH07XHJcblx0ICAgIFV0aWxzLnJlbW92ZSA9IGZ1bmN0aW9uIChwcmVkaWNhdGUsIHhzKSB7XHJcblx0ICAgICAgICB2YXIgaW5kZXggPSBVdGlscy5maW5kSW5kZXgocHJlZGljYXRlLCB4cyk7XHJcblx0ICAgICAgICB4cy5zcGxpY2UoaW5kZXgsIDEpO1xyXG5cdCAgICB9O1xyXG5cdCAgICAvLyBTZWU6IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9hc3NpZ25cclxuXHQgICAgLy8gVE9ETzogcmVwbGFjZSBpbiBmYXZvciBvZiB1c2luZyBwb2x5ZmlsbFxyXG5cdCAgICBVdGlscy5hc3NpZ24gPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG5cdCAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuXHQgICAgICAgICAgICBhcmdzW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgdmFyIHRhcmdldCA9IGFyZ3NbMF07XHJcblx0ICAgICAgICAndXNlIHN0cmljdCc7XHJcblx0ICAgICAgICBpZiAodGFyZ2V0ID09PSB1bmRlZmluZWQgfHwgdGFyZ2V0ID09PSBudWxsKSB7XHJcblx0ICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0Jyk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICB2YXIgb3V0cHV0ID0gT2JqZWN0KHRhcmdldCk7XHJcblx0ICAgICAgICBmb3IgKHZhciBpbmRleCA9IDE7IGluZGV4IDwgYXJndW1lbnRzLmxlbmd0aDsgaW5kZXgrKykge1xyXG5cdCAgICAgICAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaW5kZXhdO1xyXG5cdCAgICAgICAgICAgIGlmIChzb3VyY2UgIT09IHVuZGVmaW5lZCAmJiBzb3VyY2UgIT09IG51bGwpIHtcclxuXHQgICAgICAgICAgICAgICAgZm9yICh2YXIgbmV4dEtleSBpbiBzb3VyY2UpIHtcclxuXHQgICAgICAgICAgICAgICAgICAgIGlmIChzb3VyY2UuaGFzT3duUHJvcGVydHkobmV4dEtleSkpIHtcclxuXHQgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRbbmV4dEtleV0gPSBzb3VyY2VbbmV4dEtleV07XHJcblx0ICAgICAgICAgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgICAgIH1cclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG5cdCAgICB9O1xyXG5cdCAgICByZXR1cm4gVXRpbHM7XHJcblx0fSgpKTtcclxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcblx0ZXhwb3J0cy5kZWZhdWx0ID0gVXRpbHM7XHJcblxuXG4vKioqLyB9LFxuLyogNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xyXG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcclxuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuXHR9O1xyXG5cdHZhciBlbWJlZF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcclxuXHR2YXIgUmVwb3J0ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuXHQgICAgX19leHRlbmRzKFJlcG9ydCwgX3N1cGVyKTtcclxuXHQgICAgZnVuY3Rpb24gUmVwb3J0KGVsZW1lbnQsIG9wdGlvbnMpIHtcclxuXHQgICAgICAgIC8qKiBGb3JjZSBsb2FkQWN0aW9uIG9uIG9wdGlvbnMgdG8gbWF0Y2ggdGhlIHR5cGUgb2YgY29tcG9uZW50LiBUaGlzIGlzIHJlcXVpcmVkIHRvIGJvb3RzdHJhcCBpZnJhbWUuICovXHJcblx0ICAgICAgICBvcHRpb25zLmxvYWRBY3Rpb24gPSAnbG9hZFJlcG9ydCc7XHJcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBlbGVtZW50LCBvcHRpb25zKTtcclxuXHQgICAgfVxyXG5cdCAgICBSZXBvcnQucHJvdG90eXBlLmdldEVtYmVkVXJsID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgICAgdmFyIGVtYmVkVXJsID0gX3N1cGVyLnByb3RvdHlwZS5nZXRFbWJlZFVybC5jYWxsKHRoaXMpO1xyXG5cdCAgICAgICAgLy8gVE9ETzogTmVlZCBzYWZlIHdheSB0byBhZGQgdXJsIHBhcmFtZXRlcnMuXHJcblx0ICAgICAgICAvLyBXZSBhcmUgYXNzdW1pbmcgZW1iZWRVcmxzIHVzZSBxdWVyeSBwYXJhbWV0ZXJzIHRvIHN1cHBseSBpZCBvZiB2aXN1YWxcclxuXHQgICAgICAgIC8vIHNvIG11c3QgcHJlZml4IHdpdGggJyYnLlxyXG5cdCAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuZmlsdGVyUGFuZUVuYWJsZWQpIHtcclxuXHQgICAgICAgICAgICBlbWJlZFVybCArPSBcIiZmaWx0ZXJQYW5lRW5hYmxlZD1mYWxzZVwiO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgcmV0dXJuIGVtYmVkVXJsO1xyXG5cdCAgICB9O1xyXG5cdCAgICByZXR1cm4gUmVwb3J0O1xyXG5cdH0oZW1iZWRfMS5kZWZhdWx0KSk7XHJcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5cdGV4cG9ydHMuZGVmYXVsdCA9IFJlcG9ydDtcclxuXG5cbi8qKiovIH0sXG4vKiA1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XHJcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xyXG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG5cdH07XHJcblx0dmFyIGVtYmVkXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xyXG5cdHZhciBUaWxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuXHQgICAgX19leHRlbmRzKFRpbGUsIF9zdXBlcik7XHJcblx0ICAgIGZ1bmN0aW9uIFRpbGUoZWxlbWVudCwgb3B0aW9ucykge1xyXG5cdCAgICAgICAgLyoqIEZvcmNlIGxvYWRBY3Rpb24gb24gb3B0aW9ucyB0byBtYXRjaCB0aGUgdHlwZSBvZiBjb21wb25lbnQuIFRoaXMgaXMgcmVxdWlyZWQgdG8gYm9vdHN0cmFwIGlmcmFtZS4gKi9cclxuXHQgICAgICAgIG9wdGlvbnMubG9hZEFjdGlvbiA9ICdsb2FkVGlsZSc7XHJcblx0ICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBlbGVtZW50LCBvcHRpb25zKTtcclxuXHQgICAgfVxyXG5cdCAgICBUaWxlLnByb3RvdHlwZS5nZXRFbWJlZFVybCA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICAgIHZhciBlbWJlZFVybCA9IF9zdXBlci5wcm90b3R5cGUuZ2V0RW1iZWRVcmwuY2FsbCh0aGlzKTtcclxuXHQgICAgICAgIHJldHVybiBlbWJlZFVybDtcclxuXHQgICAgfTtcclxuXHQgICAgcmV0dXJuIFRpbGU7XHJcblx0fShlbWJlZF8xLmRlZmF1bHQpKTtcclxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcblx0ZXhwb3J0cy5kZWZhdWx0ID0gVGlsZTtcclxuXG5cbi8qKiovIH1cbi8qKioqKiovIF0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cG93ZXJiaS5qcy5tYXAiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
